{"version":3,"sources":["componment/Nav/index.js","componment/Clock/index.js","componment/Listitem/index.js","map/layer/tile/stamen.js","map/layer/image/maptiler.js","map/layer/vectortile/maptiler.js","map/layer/ArcGISRest/ImageLayer.js","map/layer/PostGIS/farmvt.js","map/layerOption.js","map/layer/draw.js","map/maplayer.js","Maplayer.js","map/mapdraw.js","Mapdraw.js","map/mapempty.js","Mapempty.js","componment/AppMenu/index.js","pages/Home/index.js","map/layer/WMTS/TDT_V2.js","Layouts/MainLayout/index.js","Layouts/BasicLayout/index.js","componment/LinkHome/index.js","componment/Listitem/control.js","pages/Layer/index.js","pages/Draw/index.js","map/layer/WMTS/TDT_V2_cva.js","map/baseMap.js","map/Instance/firstMap.js","map/Features/Travel.js","map/Features/Overlay.js","pages/City/index.js","map/Features/DrawTool.js","map/Instance/secondMap.js","pages/Draw_V2/index.js","map/Instance/thirdMap.js","map/layer/WMS/TDTserver.js","pages/GetInfo/index.js","map/Features/Measure.js","map/Features/Measure_V2.js","map/Instance/fourthMap.js","pages/Measure/index.js","map/Instance/fifthMap.js","map/layer/WMS/USA_Population.js","pages/Project/index.js","map/Features/Transaction.js","map/Instance/sixthMap.js","pages/Transaction/index.js","pages/Cesium/index.js","componment/LeftDemo/index.js","componment/CopyRight/index.js","componment/UserInfo/index.js","componment/RightDemo/index.js","Router/index.js","reportWebVitals.js","index.js"],"names":["Navmap","Item","to","React","Component","Clock","props","state","date","Date","this","timerID","setInterval","tick","clearInterval","setState","name","toLocaleDateString","toLocaleTimeString","Listitem","upper","down","last","type","shape","icon","DownOutlined","onClick","label","first","UpOutlined","className","flex","defaultChecked","visible","onChange","switch","stamen","TileLayer","source","XYZSource","url","properties","title","maptileimage","XYZ","attributions","maxZoom","maptiler","imageLayer","ImageLayer","ImageArcGISRest","ratio","params","styles","white","blue","GeometryType","POLYGON","Style","fill","Fill","color","stroke","Stroke","width","MULTI_POLYGON","LINE_STRING","MULTI_LINE_STRING","CIRCLE","concat","POINT","image","Circle","radius","zIndex","Infinity","MULTI_POINT","GEOMETRY_COLLECTION","vtLayer","LayerControl","opt_options","options","element","document","createElement","target","layers","map","resetLayers","getLayers","forEach","ele","idx","push","get","getVisible","getMap","index","getLayerIdxByLabel","reorder","console","log","beforeIdx","afterIdx","removeAt","insertAt","setVisible","Control","DragTool","VectorSource","layer","VectorLayer","style","CircleStyle","addLayer","drag","DragAndDrop","formatConstructors","GeoJSON","WKT","on","features","getView","fit","getExtent","padding","addInteraction","select","Select","snap","removeInteraction","Snap","clear","tooloption","Draw","removeLastPoint","getFeatures","length","removeFeature","item","Modify","Translate","json","featureProjection","writeFeatures","link","download","href","click","removeSnap","ins","mapInstance","mapIns","drawPage","Map","controls","MousePosition","projection","OSM","view","View","center","fromLonLat","zoom","defaultControls","extend","Text","Typography","AppMenu","justify","span","HomeOutlined","UnorderedListOutlined","FormatPainterOutlined","ProjectOutlined","BuildOutlined","DiffTwoTone","HighlightTwoTone","TrademarkCircleOutlined","HomePage","background","height","MainLayout","myRef","createRef","current","ref","BasicLayout","left","right","LinkHome","RollbackOutlined","ListControl","order","mymap","getControls","orderBYLabel","toggleVisible","bind","LayerPage","textAlign","fontSize","DrawPage","onChangeSnap","e","tool","addSnap","handleOptionChange","option","value","toolOption","handleGsChange","gs","downLoad","active","deactive","Group","Button","checkedChildren","unCheckedChildren","getProjection","projectionExtent","size","getWidth","resolutions","Array","matrixIds","z","Math","pow","createMap","preload","opacity","WMTS","dimensions","tk","matrixSet","format","tileGrid","WMTSTileGrid","origin","getTopLeft","wrapX","instance","Travel","t","s","p","sin","PI","anchor","rotation","getRotation","animate","easing","easeIn","easeOut","duration","elastic","bounce","rome","getCenter","location","done","getZoom","parts","called","callback","complete","pan","elasticA","bounceA","spin","flyTo","travel","OverlayMy","popup","createOverlay","addOverlay","Overlay","setPosition","undefined","coordinate","appMap","CityPage","customSelect","clearInter","goto","citys","addInter","currentPersent","description","overlay","firstMap","setElement","setZoom","clock","hide","show","direction","city","margin","bordered","strokeWidth","percent","showInfo","display","id","drawTool","geodesicStyle","geometry","feature","getGeometry","vector","getType","draw","defaultStyle","getOverlay","getStyleFunction","modify","modifyFeature","modifyGeometry","modifyPoint","getCoordinates","geometries","getGeometries","polygon","transform","getDistance","circle","circular","setCoordinates","setGeometries","event","set","clone","setGeometry","unset","addInteractions","geometryFunction","createRegularPolygon","createBox","coordinates","dx","dy","sqrt","atan2","newCoordinates","i","angle","fraction","offsetX","cos","offsetY","slice","Polygon","GeometryCollection","Point","setType","undo","Option","DrawV2Page","changeType","defaultValue","disabled","DownloadOutlined","thirdMap","info","OB","BaseObject","TileWMS","serverType","transition","evt","wmsSource","getSource","viewResolution","getResolution","getFeatureInfoUrl","fetch","then","response","text","JSON","parse","setProperties","dispatchEvent","TDTserver","GetInfo","pro","getProperties","GB","NAME","OBJECTID","RN","Shape_Leng","TYPE","measure","sketch","helpTooltipElement","helpTooltip","measureTooltipElement","measureTooltip","maplistener","pointerMoveHandler","dragging","helpMsg","geom","LineString","innerHTML","classList","remove","fun","add","addEventListener","getViewport","listener","lineDash","createMeasureTooltip","parentNode","removeChild","offset","positioning","createHelpTooltip","tooltipCoord","output","area","getArea","round","formatArea","getInteriorPoint","line","getLength","formatLength","getLastCoordinate","setOffset","unByKey","measureTooltips","stopEvent","insertFirst","change","removeEventListener","temp","pop","removeOverlay","measureV2","tipPoint","typeSelect","showSegments","clearPrevious","labelStyle","font","backgroundFill","textBaseline","RegularShape","points","displacement","tipStyle","modifyStyle","segmentStyle","segmentStyles","styleFunction","segments","drawType","tip","point","count","forEachSegment","a","b","segment","segmentPoint","getCoordinateAt","getText","setText","activeTip","idleTip","setActive","once","showSegmentsChange","changed","clearPreviousChange","MeasurePage","change2","change3","change4","clear1","fifthMap","setCenter","project","update","getParams","CQL_FILTER","updateParams","update2","clip","update3","FeatureID","USA_Population","ProjectPage","dosomething","dosomething2","dosomething3","transaction","highlight","lyrGp","LayerGroup","readFeatures","addFeatures","TransactionPage","unregister","sync","destroy","sixthMap","Cesium","window","CesiumPage","vehicleEntity","viewer","Viewer","shouldAnimate","dataSource","CzmlDataSource","dataSources","partsToLoad","range","requested","loaded","processPart","part","process","trackedEntity","entities","getById","onTick","timeOffset","JulianDate","secondsDifference","currentTime","startTime","filter","fuel_remaining","getValue","class","LeftDemo","backgroundColor","CopyRight","themes","light","foreground","dark","ThemeContext","createContext","App","Provider","Toolbar","ThemedButton","theme","useContext","init","initialCount","reducer","action","payload","Error","Counter","useReducer","dispatch","useFriendStatus","friendID","useState","isOnline","useEffect","FriendStatus","friend","RightDemo","MyRouter","path","Layer","Project","Home","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a013a888.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Breadcrumb } from 'antd';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Navmap extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/\">主页</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/about\">关于</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/app\">地图总览</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/layer\">图层管理</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/draw\">数据标绘</Link>\r\n        </Breadcrumb.Item>\r\n      </Breadcrumb>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navmap;","import React from 'react';\r\n\r\nclass Clock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { date: new Date() };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timerID = setInterval(() => {\r\n      this.tick()\r\n    }, 1000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timerID)\r\n  }\r\n\r\n  tick() {\r\n    this.setState({\r\n      date: new Date()\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <span>{this.props.name}</span>\r\n        <span>{this.state.date.toLocaleDateString()}</span>\r\n        <span>{this.state.date.toLocaleTimeString()}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Clock;","import React from 'react';\r\nimport './index.less';\r\nimport { Switch, Button } from 'antd';\r\nimport { Row, Col } from 'antd';\r\nimport { DownOutlined, UpOutlined } from '@ant-design/icons';\r\n\r\nclass Listitem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"listitem\"\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    let upper, down;\r\n    if (!this.props.last) {\r\n      upper =\r\n        <Button type=\"primary\" shape=\"circle\" icon={<DownOutlined />}\r\n          onClick={() => { this.props.down(this.props.label) }} />\r\n    }\r\n    if (!this.props.first) {\r\n      down =\r\n        <Button type=\"primary\" shape=\"circle\" icon={<UpOutlined />}\r\n          onClick={() => { this.props.upper(this.props.label) }} />\r\n    }\r\n    return (\r\n      <div className=\"list-item\">\r\n        <Row>\r\n          <Col flex=\"auto\">\r\n            {this.props.label}\r\n          </Col>\r\n          <Col flex=\"50px\" >\r\n            {upper}\r\n          </Col>\r\n          <Col flex=\"50px\" >\r\n            {down}\r\n          </Col>\r\n          <Col flex=\"50px\">\r\n            <Switch defaultChecked={this.props.visible} onChange={() => { this.props.switch(this.props.label) }} />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Listitem;","import TileLayer from 'ol/layer/Tile';\r\nimport XYZSource from 'ol/source/XYZ';\r\n\r\nfunction stamen() {\r\n  return new TileLayer({\r\n    source: new XYZSource({\r\n      url: 'http://tile.stamen.com/terrain/{z}/{x}/{y}.jpg'\r\n    }),\r\n    visible: false,\r\n    properties: {\r\n      title: \"stamen-terrain\",\r\n      label: \"stamen-terrain\"\r\n    }\r\n  })\r\n}\r\nexport default stamen;","import TileLayer from 'ol/layer/Tile';\r\nimport XYZ from 'ol/source/XYZ';\r\n\r\nfunction maptileimage() {\r\n  // See https://cloud.maptiler.com/ for terms and API key\r\n  const key = 'lirfd6Fegsjkvs0lshxe'; // use your own instead\r\n  return new TileLayer({\r\n    source: new XYZ({\r\n      attributions: ['<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ',\r\n        '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'],\r\n      url:\r\n        'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=' + key,\r\n      maxZoom: 20,\r\n    }),\r\n    properties: {\r\n      title: \"maptiler-satellite\",\r\n      label: \"maptiler-satellite\"\r\n    }\r\n  })\r\n}\r\nexport default maptileimage","import MVT from 'ol/format/MVT';\r\nimport VectorTileLayer from 'ol/layer/VectorTile';\r\nimport VectorTileSource from 'ol/source/VectorTile';\r\n\r\nfunction maptiler() {\r\n  // See https://cloud.maptiler.com/ for terms and API key\r\n  const key = 'lirfd6Fegsjkvs0lshxe'; // use your own instead\r\n  return new VectorTileLayer({\r\n    source: new VectorTileSource({\r\n      attributions: [\r\n        '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a>',\r\n        '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'\r\n      ],\r\n      format: new MVT(),\r\n      url: `https://api.maptiler.com/tiles/v3/{z}/{x}/{y}.pbf?key=${key}`,\r\n      maxZoom: 14\r\n    }),\r\n    visible: false,\r\n    properties: {\r\n      label: \"maptiler-V3\"\r\n    }\r\n  });\r\n}\r\nexport default maptiler","\r\nimport { ImageArcGISRest } from 'ol/source';\r\nimport { Image as ImageLayer } from 'ol/layer';\r\n\r\nfunction imageLayer() {\r\n  return new ImageLayer({\r\n    source: new ImageArcGISRest({\r\n      ratio: 1,\r\n      params: {},\r\n      url: 'http://192.168.110.77:6080/arcgis/rest/services/shp/shangcheng/MapServer',\r\n    }),\r\n    properties: {\r\n      label: '汤阴'\r\n    }\r\n  })\r\n}\r\n\r\nexport default imageLayer;","import WKB from 'ol/format/WKB';\r\nimport VectorTileLayer from 'ol/layer/VectorTile';\r\nimport VectorTileSource from 'ol/source/VectorTile';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Circle, Fill, Stroke, Style } from 'ol/style';\r\n\r\nconst styles = {};\r\nconst white = [255, 255, 255, 1];\r\nconst blue = [0, 153, 255, 1];\r\nconst width = 3;\r\nstyles[GeometryType.POLYGON] = [\r\n  new Style({\r\n    fill: new Fill({\r\n      color: [255, 255, 255, 0.5],\r\n    }),\r\n    stroke: new Stroke({\r\n      color: '#3399CC',\r\n      width: 1.25,\r\n    }),\r\n  }),\r\n];\r\nstyles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\r\n\r\nstyles[GeometryType.LINE_STRING] = [\r\n  new Style({\r\n    stroke: new Stroke({\r\n      color: white,\r\n      width: width + 2,\r\n    }),\r\n  }),\r\n  new Style({\r\n    stroke: new Stroke({\r\n      color: blue,\r\n      width: width,\r\n    }),\r\n  }),\r\n];\r\nstyles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\r\n\r\nstyles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(\r\n  styles[GeometryType.LINE_STRING]\r\n);\r\n\r\nstyles[GeometryType.POINT] = [\r\n  new Style({\r\n    image: new Circle({\r\n      radius: width * 2,\r\n      fill: new Fill({\r\n        color: blue,\r\n      }),\r\n      stroke: new Stroke({\r\n        color: white,\r\n        width: width / 2,\r\n      }),\r\n    }),\r\n    zIndex: Infinity,\r\n  }),\r\n];\r\nstyles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\r\n\r\nstyles[GeometryType.GEOMETRY_COLLECTION] = styles[\r\n  GeometryType.POLYGON\r\n].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\r\n\r\n\r\nasync function vtLayer(map) {\r\n  const format = new WKB();\r\n  const response = await fetch('http://localhost:3000/farm');\r\n  const data = await response.json();\r\n  const features = data.map((item) => {\r\n    const feature = format.readFeature(item.geometry, {\r\n      dataProjection: 'EPSG:3857',\r\n      featureProjection: 'EPSG:3857',\r\n    });\r\n    return feature;\r\n  })\r\n  const vc = new VectorLayer({\r\n    source: new VectorSource({\r\n      features: features\r\n    }),\r\n    style: function (feature) {\r\n      const geometry = feature.getGeometry();\r\n      const type = geometry.getType();\r\n      return styles[type];\r\n    }\r\n  })\r\n  // const vtLayer = new VectorTileLayer({\r\n  //   declutter: true,\r\n  //   source: new VectorTileSource({\r\n  //     tileLoadFunction: function (tile, url) {\r\n  //       tile.setLoader(function (extent, resolution, projection) {\r\n  //         fetch(url).then(function (response) {\r\n  //           response.json().then(function (data) {\r\n  //             const format = tile.getFormat() // ol/format/MVT configured as source format\r\n  //             const features = format.readFeatures(data, {\r\n  //               extent: extent,\r\n  //               featureProjection: projection\r\n  //             });\r\n  //             tile.setFeatures(features);\r\n  //           });\r\n  //         });\r\n  //       });\r\n  //     },\r\n  //     format: new WKB(),\r\n  //     url:\r\n  //       'http://localhost:3000/farm',\r\n  //   }),\r\n  //   style: function (feature) {\r\n  //     const geometry = feature.getGeometry();\r\n  //     const type = geometry.getType();\r\n  //     return styles[type];\r\n  //   },\r\n  // })\r\n  map.addLayer(vc);\r\n}\r\n\r\nexport default vtLayer;","import { Control } from 'ol/control';\r\n\r\nclass LayerControl extends Control {\r\n  /**\r\n   * @param {Object} [opt_options] Control options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    const element = document.createElement('div');\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target,\r\n    });\r\n\r\n    this.layers = [];\r\n  }\r\n\r\n  setMap(map) {\r\n    super.setMap(map);\r\n    if (map) {\r\n      this.resetLayers(map);\r\n    }\r\n  }\r\n\r\n  resetLayers(map) {\r\n    this.layers = [];\r\n    map.getLayers().forEach((ele, idx) => {\r\n      this.layers.push({\r\n        label: ele.get(\"label\"),\r\n        visible: ele.getVisible()\r\n      });\r\n    });\r\n  }\r\n\r\n  getLayerIdxByLabel(label) {\r\n    const layers = this.getMap().getLayers();\r\n    let index = -1;\r\n    layers.forEach((ele, idx) => {\r\n      if (ele.get(\"label\") === label) {\r\n        index = idx;\r\n      }\r\n    });\r\n    return index;\r\n  }\r\n\r\n  orderBYLabel(label, type) {\r\n    const idx = this.getLayerIdxByLabel(label);\r\n    if (idx === -1) return;\r\n    switch (type) {\r\n      case \"upper\":\r\n        this.reorder(idx, (idx - 1));\r\n        break;\r\n      case \"down\":\r\n        this.reorder(idx, (idx + 1));\r\n        break;\r\n      default: console.log(\"unknow type\");\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  reorder(beforeIdx, afterIdx) {\r\n    const layers = this.getMap().getLayers();\r\n    const ele = layers.removeAt(beforeIdx);\r\n    layers.insertAt(afterIdx, ele);\r\n    this.resetLayers(this.getMap());\r\n  }\r\n\r\n  toggleVisible(label) {\r\n    const layers = this.getMap().getLayers();\r\n    let index = -1;\r\n    layers.forEach((ele, idx) => {\r\n      if (ele.get(\"label\") === label) {\r\n        ele.setVisible(!ele.getVisible());\r\n        index = idx;\r\n      }\r\n    });\r\n    this.resetLayers(this.getMap());\r\n    return index;\r\n  }\r\n}\r\n\r\nexport default LayerControl","\r\nimport DragAndDrop from 'ol/interaction/DragAndDrop';\r\nimport Translate from 'ol/interaction/Translate';\r\nimport { Select } from 'ol/interaction';\r\n\r\nimport { Circle as CircleStyle, Fill, Stroke, Style } from 'ol/style';\r\nimport { Draw, Modify, Snap } from 'ol/interaction';\r\n\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport WKT from 'ol/format/WKT';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\n\r\nclass DragTool {\r\n  constructor(map) {\r\n    this.map = map;\r\n    this.source = new VectorSource();\r\n    this.layer = new VectorLayer({\r\n      source: this.source,\r\n      style: new Style({\r\n        fill: new Fill({\r\n          color: 'rgba(255, 255, 255, 0.2)',\r\n        }),\r\n        stroke: new Stroke({\r\n          color: '#ffcc33',\r\n          width: 2,\r\n        }),\r\n        image: new CircleStyle({\r\n          radius: 7,\r\n          fill: new Fill({\r\n            color: '#ffcc33',\r\n          }),\r\n        }),\r\n      }),\r\n      properties: {\r\n        label: \"custom-Layer\"\r\n      }\r\n    })\r\n    this.map.addLayer(this.layer);\r\n    // 拖拽文件预览（矢量）\r\n    this.drag = new DragAndDrop({\r\n      source: this.source,\r\n      formatConstructors: [GeoJSON, WKT],\r\n    })\r\n    this.drag.on(\"addfeatures\", (features) => {\r\n      this.map.getView().fit(this.source.getExtent(), {\r\n        padding: [200, 200, 200, 200]\r\n      });\r\n    })\r\n    this.map.addInteraction(this.drag);\r\n    this.select = new Select()\r\n    this.map.addInteraction(this.select);\r\n  }\r\n\r\n  removeSnap() {\r\n    if (this.snap) {\r\n      this.map.removeInteraction(this.snap);\r\n    }\r\n  }\r\n\r\n  addSnap() {\r\n    this.snap = new Snap({\r\n      source: this.source\r\n    });\r\n    this.map.addInteraction(this.snap);\r\n  }\r\n\r\n  toolOption(type) {\r\n    switch (type) {\r\n      case \"clear\":\r\n        this.clear();\r\n        break;\r\n      case \"undo\":\r\n        if (this.tooloption instanceof Draw) {\r\n          this.tooloption.removeLastPoint();\r\n        }\r\n        return;\r\n        break;\r\n      case \"delete\":\r\n        if (this.select.getFeatures().length !== 0) {\r\n          this.source.removeFeature(this.select.getFeatures().item(0));\r\n        }\r\n        return;\r\n        break;\r\n    }\r\n    if (this.tooloption) {\r\n      this.map.removeInteraction(this.tooloption);\r\n      this.tooloption = null;\r\n    }\r\n    switch (type) {\r\n      case \"point\":\r\n        this.tooloption = new Draw({\r\n          type: 'Point',\r\n          source: this.source\r\n        })\r\n        break;\r\n      case \"line\":\r\n        this.tooloption = new Draw({\r\n          type: 'LineString',\r\n          source: this.source\r\n        })\r\n        break;\r\n      case \"polygon\":\r\n        this.tooloption = new Draw({\r\n          type: 'Polygon',\r\n          source: this.source\r\n        })\r\n        break;\r\n      case \"modify\":\r\n        this.tooloption = new Modify({\r\n          source: this.source\r\n        })\r\n        break;\r\n      case \"translate\":\r\n        this.tooloption = new Translate({\r\n          features: this.select.getFeatures(),\r\n        })\r\n        break;\r\n\r\n    }\r\n    if (this.tooloption) {\r\n      this.map.addInteraction(this.tooloption);\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.source.clear();\r\n  }\r\n\r\n  downLoad() {\r\n    const features = this.source.getFeatures();\r\n    const format = new GeoJSON({ featureProjection: 'EPSG:3857' });\r\n    const json = format.writeFeatures(features);\r\n    let link = document.createElement(\"a\");\r\n    link.download = \"features.json\";\r\n    link.href = 'data:text/json;charset=utf-8,' + json;\r\n    link.click();\r\n  }\r\n\r\n  active() {\r\n    this.layer.setVisible(true);\r\n    this.map.addInteraction(this.select);\r\n  }\r\n\r\n  deactive() {\r\n    this.layer.setVisible(false);\r\n    this.map.removeInteraction(this.select);\r\n    this.removeSnap();\r\n    this.map.removeInteraction(this.tooloption);\r\n  }\r\n}\r\n\r\nlet ins = null;\r\nfunction Instance(map) {\r\n  if (ins == null) {\r\n    ins = new DragTool(map)\r\n  }\r\n  return ins;\r\n}\r\nexport {\r\n  Instance\r\n}","import \"ol/ol.css\";\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport OSM from 'ol/source/OSM';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport { MousePosition, defaults as defaultControls } from 'ol/control';\r\n\r\nimport stamen from \"./layer/tile/stamen\";\r\nimport maptileimage from \"./layer/image/maptiler\";\r\nimport countries from \"./layer/vector/geojson/countries\";\r\nimport maptiler from \"./layer/vectortile/maptiler\";\r\nimport imageLayer from './layer/ArcGISRest/ImageLayer';\r\nimport vtLayer from './layer/PostGIS/farmvt';\r\n\r\nimport LayerControl from \"./layerOption\";\r\nimport { Instance } from './layer/draw';\r\n\r\nimport { wfs_zg_tl } from './layer/WFS/wfs_zg_tl';\r\nimport { data_filter_sz } from './layer/WFS/data_filter_sz';\r\nimport { wfs_gl_sz } from './layer/WFS/wfs_gl_sz';\r\nimport { test2 } from './layer/WMS/test';\r\nimport { test } from './layer/WMS/shenzhen';\r\n\r\nlet mapInstance = null;\r\n// 主页地图\r\nfunction map(target) {\r\n  mapInstance = new Map({\r\n    // controls: defaultControls().extend([new MousePosition({ projection: \"EPSG:4326\" }), new LayerControl()]),\r\n    controls: ([new MousePosition({ projection: \"EPSG:4326\" }), new LayerControl()]),\r\n    layers: [\r\n      new TileLayer({\r\n        source: new OSM(),\r\n        visible: false,\r\n        properties: {\r\n          title: \"OSM\",\r\n          label: \"OSM\"\r\n        }\r\n      }),\r\n      maptileimage(),\r\n      // stamen(),\r\n      // countries(),\r\n      // maptiler(),\r\n      // wfs_zg_tl(),\r\n      // data_filter_sz(),\r\n      // wfs_gl_sz(),\r\n      // test2(),\r\n      imageLayer()\r\n    ],\r\n    target: target,\r\n    view: new View({\r\n      center: fromLonLat([115.34663038250943, 31.77475638884019]),\r\n      zoom: 11,\r\n    }),\r\n  });\r\n  // test(mapInstance);\r\n  // vtLayer(mapInstance)\r\n  return mapInstance;\r\n}\r\n\r\nfunction mapIns() {\r\n  return mapInstance;\r\n}\r\nfunction drawPage() {\r\n  return Instance(mapIns());\r\n}\r\n\r\nexport default map;\r\nexport {\r\n  mapIns,\r\n  drawPage\r\n}","import React from 'react';\nimport './App.less';\nimport { Row, Col } from 'antd';\nimport Clock from './componment/Clock/index';\nimport Listitem from './componment/Listitem/index';\nimport Navmap from './componment/Nav/index';\n\nimport map from \"./map/maplayer\";\nimport LayerControl from \"./map/layerOption\";\n\nclass MapLayer extends React.Component {\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef();\n    this.state = {\n      order: null,\n      layers: []\n    }\n  }\n\n  componentDidMount() {\n    const mymap = map(this.myRef.current);\n    const controls = mymap.getControls();\n    let order = null;\n    controls.forEach((ele) => {\n      if (ele instanceof LayerControl) {\n        order = ele;\n      }\n    });\n    this.map = mymap;\n    this.order = order;\n    this.setState({\n      order: order,\n      layers: order.layers\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      order: null,\n      layers: []\n    });\n  }\n\n  upper(label) {\n    this.order.orderBYLabel(label, 'upper')\n    this.setState({\n      layers: this.order.layers\n    });\n  }\n\n  down(label) {\n    this.order.orderBYLabel(label, 'down');\n    this.setState({\n      layers: this.order.layers\n    });\n  }\n\n  switch(label) {\n    this.order.toggleVisible(label);\n    this.setState({\n      layers: this.order.layers\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Row>\n          <Col flex={9}>\n            <div className=\"mapContainer\" ref={this.myRef}></div>\n          </Col>\n          <Col flex={1} className=\"sidepanel\">\n            <Navmap />\n            <div className=\"sidepanel-title\">图层 列表</div>\n            <Clock name=\"时间：\"></Clock>\n            <div className=\"layer-list\">\n              {\n                this.state.layers.map((layer, index) => {\n                  return (\n                    <Listitem\n                      switch={this.switch.bind(this)}\n                      upper={this.upper.bind(this)}\n                      down={this.down.bind(this)}\n                      first={index === 0}\n                      last={index === (this.state.layers.length - 1)}\n                      key={layer.label}\n                      label={layer.label}\n                      visible={layer.visible}>\n                    </Listitem>\n                  )\n                })\n              }\n            </div>\n          </Col>\n        </Row>\n      </div>\n    )\n  }\n}\n\nexport default MapLayer;","import \"ol/ol.css\";\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport OSM from 'ol/source/OSM';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport { MousePosition, defaults as defaultControls } from 'ol/control';\r\n\r\nimport stamen from \"./layer/tile/stamen\";\r\n\r\nimport LayerControl from \"./layerOption\";\r\n\r\nfunction map(target) {\r\n  const map = new Map({\r\n    controls: defaultControls().extend([new MousePosition({ projection: \"EPSG:4326\" }), new LayerControl()]),\r\n    layers: [\r\n      new TileLayer({\r\n        source: new OSM(),\r\n        properties: {\r\n          title: \"OSM\",\r\n          label: \"OSM\"\r\n        }\r\n      }),\r\n      stamen()\r\n    ],\r\n    target: target,\r\n    view: new View({\r\n      center: fromLonLat([104.29, 35.28]),\r\n      zoom: 5,\r\n    }),\r\n  });\r\n  return map;\r\n}\r\n\r\nexport default map;","import React from 'react';\nimport { Row, Col } from 'antd';\nimport Clock from './componment/Clock/index';\nimport Navmap from './componment/Nav/index';\n\nimport map from \"./map/mapdraw\";\nimport LayerControl from \"./map/layerOption\";\n\nclass MapDraw extends React.Component {\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef();\n    this.state = {\n      order: null,\n      layers: []\n    }\n  }\n\n  componentDidMount() {\n    const mymap = map(this.myRef.current);\n    const controls = mymap.getControls();\n    let order = null;\n    controls.forEach((ele) => {\n      if (ele instanceof LayerControl) {\n        order = ele;\n      }\n    });\n    this.map = mymap;\n    this.order = order;\n    this.setState({\n      order: order,\n      layers: order.layers\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      order: null,\n      layers: []\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Row>\n          <Col flex={9}>\n            <div className=\"mapContainer\" ref={this.myRef}></div>\n          </Col>\n          <Col flex={1} className=\"sidepanel\">\n            <Navmap />\n            <div className=\"sidepanel-title\">数据  标绘</div>\n            <Clock name=\"时间：\"></Clock>\n          </Col>\n        </Row>\n      </div>\n    )\n  }\n}\n\nexport default MapDraw;","import \"ol/ol.css\";\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport OSM from 'ol/source/OSM';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport { MousePosition, defaults as defaultControls } from 'ol/control';\r\n\r\nfunction map(target) {\r\n  const map = new Map({\r\n    controls: defaultControls().extend([new MousePosition({ projection: \"EPSG:4326\" })]),\r\n    layers: [\r\n      new TileLayer({\r\n        source: new OSM(),\r\n        properties: {\r\n          title: \"OSM\",\r\n          label: \"OSM\"\r\n        }\r\n      })\r\n    ],\r\n    target: target,\r\n    view: new View({\r\n      center: fromLonLat([104.29, 35.28]),\r\n      zoom: 5,\r\n    }),\r\n  });\r\n  return map;\r\n}\r\n\r\nexport default map;","import React from 'react';\nimport { Row, Col } from 'antd';\nimport Clock from './componment/Clock/index';\nimport Navmap from './componment/Nav/index';\n\nimport map from \"./map/mapempty\";\n\nclass MapEmpty extends React.Component {\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef();\n  }\n\n  componentDidMount() {\n    map(this.myRef.current);\n  }\n\n  componentWillUnmount() {\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Row>\n          <Col flex={9}>\n            <div className=\"mapContainer\" ref={this.myRef}></div>\n          </Col>\n          <Col flex={1} className=\"sidepanel\">\n            <Navmap />\n            <div className=\"sidepanel-title\">地图  总览</div>\n            <Clock name=\"时间：\"></Clock>\n            \n          </Col>\n        </Row>\n      </div>\n    )\n  }\n}\n\nexport default MapEmpty;","import React from 'react';\r\nimport './index.less';\r\nimport { Row, Col } from 'antd';\r\nimport { Typography } from 'antd';\r\n\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nimport { HomeOutlined, UnorderedListOutlined, FormatPainterOutlined, BuildOutlined } from '@ant-design/icons';\r\n\r\nimport { ProjectOutlined, DiffTwoTone, HighlightTwoTone, TrademarkCircleOutlined } from '@ant-design/icons';\r\nconst { Text } = Typography;\r\n\r\nclass AppMenu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Text>\r\n          <div className=\"labeltitle\">\r\n            目录\r\n          </div>\r\n        </Text>\r\n        <Row justify=\"left\" className=\"menurow\">\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/\">\r\n                <div className=\"item-top\">\r\n                  <HomeOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">主页</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/layer\">\r\n                <div className=\"item-top\">\r\n                  <UnorderedListOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">图层浏览</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/draw\">\r\n                <div className=\"item-top\">\r\n                  <FormatPainterOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">图形绘制</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/project\">\r\n                <div className=\"item-top\">\r\n                  <ProjectOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">项目审查</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row justify=\"left\" className=\"menurow\">\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/city\">\r\n                <div className=\"item-top\">\r\n                  <BuildOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">城市浏览</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/draw_V2\">\r\n                <div className=\"item-top\">\r\n                  <DiffTwoTone />\r\n                </div>\r\n                <Text className=\"item-bot\">绘制工具</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/getinfo\">\r\n                <div className=\"item-top\">\r\n                  <HighlightTwoTone />\r\n                </div>\r\n                <Text className=\"item-bot\">数据查询</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/measure\">\r\n                <div className=\"item-top\">\r\n                  <TrademarkCircleOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">测量工具</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n        </Row><Row justify=\"left\" className=\"menurow\">\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <Link to=\"/cesium\">\r\n                <div className=\"item-top\">\r\n                  <BuildOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">cesium</Text>\r\n              </Link>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <a href=\"./arcgis/index.html\">\r\n                <div className=\"item-top\">\r\n                  <BuildOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">旋转地球</Text>\r\n              </a>\r\n            </div>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <div className=\"item\">\r\n              <a href=\"./ol/openlayers.html\">\r\n                <div className=\"item-top\">\r\n                  <BuildOutlined />\r\n                </div>\r\n                <Text className=\"item-bot\">矢量瓦片(mbtiles)</Text>\r\n              </a>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppMenu;","import React from 'react';\r\n\r\nimport AppMenu from '../../componment/AppMenu';\r\n\r\nclass HomePage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ background: '#d9d9d9',height:\"100%\" }}>\r\n        <AppMenu />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HomePage;","import TileLayer from 'ol/layer/Tile';\r\nimport WMTS from 'ol/source/WMTS';\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS';\r\nimport { get as getProjection } from 'ol/proj';\r\nimport { getTopLeft, getWidth } from 'ol/extent';\r\n\r\nconst projection = getProjection('EPSG:3857');\r\nconst projectionExtent = projection.getExtent();\r\nconst size = getWidth(projectionExtent) / 256;\r\nconst resolutions = new Array(19);\r\nconst matrixIds = new Array(19);\r\nfor (let z = 0; z < 19; ++z) {\r\n  // generate resolutions and matrixIds arrays for this WMTS\r\n  resolutions[z] = size / Math.pow(2, z);\r\n  matrixIds[z] = z;\r\n}\r\n\r\nfunction TDTvec() {\r\n  let layer = new TileLayer({\r\n    preload: 10,\r\n    opacity: 1,\r\n    source: new WMTS({\r\n      dimensions: { tk: \"de8da8b392c1c69e3bd20f90b84496a5\" },\r\n      url:\r\n        'http://t{0-7}.tianditu.gov.cn/vec_w/wmts?',\r\n      layer: 'vec',\r\n      matrixSet: 'w',\r\n      format: 'tiles',\r\n      projection: projection,\r\n      tileGrid: new WMTSTileGrid({\r\n        origin: getTopLeft(projectionExtent),\r\n        resolutions: resolutions,\r\n        matrixIds: matrixIds,\r\n      }),\r\n      style: 'default',\r\n      wrapX: true,\r\n    }),\r\n    properties: {\r\n      label: \"天地图-vec\"\r\n    }\r\n  })\r\n  return layer;\r\n}\r\n\r\nexport {\r\n  TDTvec\r\n}","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\nimport map from '../../map/maplayer';\r\n\r\nclass MainLayout extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    const mymap = map(this.myRef.current);\r\n\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={{ height: '100vh', width: \"100%\" }} ref={this.myRef}></div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainLayout;","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\n\r\nclass BasicLayout extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  componentDidMount() {\r\n\r\n  }\r\n  componentWillUnmount() {\r\n\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Col flex=\"auto\">{this.props.left}</Col>\r\n          <Col flex=\"320px\">{this.props.right}</Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BasicLayout;","import React from 'react';\r\nimport './index.less';\r\nimport { Typography } from 'antd';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\nimport { RollbackOutlined } from '@ant-design/icons';\r\nconst { Text } = Typography;\r\n\r\nclass LinkHome extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"home-item\">\r\n        <Link to=\"/\">\r\n          <div className=\"home-item-top\">\r\n            <RollbackOutlined />\r\n          </div>\r\n          <Text className=\"home-item-bot\">返回</Text>\r\n        </Link>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LinkHome;","import React from 'react';\r\n\r\nimport Listitem from './index';\r\n\r\nimport { mapIns } from '../../map/maplayer';\r\nimport LayerControl from '../../map/layerOption';\r\n\r\nclass ListControl extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      order: null,\r\n      layers: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const mymap = mapIns();\r\n    if (mymap) {\r\n      const controls = mymap.getControls();\r\n      let order = null;\r\n      controls.forEach((ele) => {\r\n        if (ele instanceof LayerControl) {\r\n          order = ele;\r\n        }\r\n      });\r\n      this.map = mymap;\r\n      this.order = order;\r\n      this.setState({\r\n        order: order,\r\n        layers: order.layers\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState({\r\n      order: null,\r\n      layers: []\r\n    });\r\n  }\r\n\r\n  upper(label) {\r\n    this.order.orderBYLabel(label, 'upper')\r\n    this.setState({\r\n      layers: this.order.layers\r\n    });\r\n  }\r\n\r\n  down(label) {\r\n    this.order.orderBYLabel(label, 'down');\r\n    this.setState({\r\n      layers: this.order.layers\r\n    });\r\n  }\r\n\r\n  switch(label) {\r\n    this.order.toggleVisible(label);\r\n    this.setState({\r\n      layers: this.order.layers\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"list-container\">\r\n        {\r\n          this.state.layers.map((layer, index) => {\r\n            return (\r\n              <Listitem\r\n                switch={this.switch.bind(this)}\r\n                upper={this.upper.bind(this)}\r\n                down={this.down.bind(this)}\r\n                first={index === 0}\r\n                last={index === (this.state.layers.length - 1)}\r\n                key={layer.label}\r\n                label={layer.label}\r\n                visible={layer.visible}>\r\n              </Listitem>\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListControl","import React from 'react';\r\n\r\nimport LinkHome from '../../componment/LinkHome';\r\n\r\nimport ListControl from '../../componment/Listitem/control';\r\n\r\nclass LayerPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ background: '#d9d9d9', height: \"100%\" }}>\r\n        <LinkHome></LinkHome>\r\n        <pre style={{ textAlign: 'center', fontSize: \"1.5rem\", padding: '10px 0px 0px 20px' }}>\r\n          <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>图层</span>\r\n          <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>列表</span>\r\n        </pre>\r\n        <ListControl></ListControl>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LayerPage;","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\n\r\nimport LinkHome from '../../componment/LinkHome';\r\nimport { drawPage } from '../../map/maplayer';\r\n\r\nimport { Button, Radio } from 'antd';\r\nimport { Switch } from 'antd';\r\n\r\nclass DrawPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      snap: false,\r\n      option: \"\",\r\n      gs: \"3857\",\r\n      tool: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const tool = drawPage()\r\n    this.setState({\r\n      tool: tool\r\n    });\r\n    tool.active();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.tool) {\r\n      this.state.tool.deactive();\r\n    }\r\n  }\r\n\r\n  onChangeSnap = (e) => {\r\n    this.setState({\r\n      snap: e\r\n    });\r\n    if (e === true) {\r\n      this.state.tool.addSnap()\r\n    } else {\r\n      this.state.tool.removeSnap()\r\n    }\r\n  }\r\n\r\n  handleOptionChange = (e) => {\r\n    this.setState({\r\n      option: e.target.value\r\n    });\r\n    this.state.tool.toolOption(e.target.value);\r\n  }\r\n\r\n  handleGsChange = (e) => {\r\n    this.setState({\r\n      gs: e.target.value\r\n    });\r\n  }\r\n\r\n  downLoad = () => {\r\n    this.state.tool.downLoad();\r\n  }\r\n\r\n  render() {\r\n    const { snap, option, gs } = this.state;\r\n    return (\r\n      <div style={{ background: '#d9d9d9', height: \"100%\" }}>\r\n        <LinkHome></LinkHome>\r\n        <div className=\"drawToolPanel\">\r\n          <Row justify=\"center\">\r\n            <Col>\r\n              <h1 style={{ fontSize: '1.5rem' }}>\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>图形</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>绘制</span>\r\n              </h1>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <div>TIPS:支持上传文件(拖拽文件至地图上即可)</div>\r\n            </Col>\r\n          </Row>\r\n          <Radio.Group value={option} onChange={this.handleOptionChange}>\r\n            <Row>\r\n              <Col>\r\n                <Radio.Button value=\"point\">画点</Radio.Button>\r\n                <Radio.Button value=\"line\">画线</Radio.Button>\r\n                <Radio.Button value=\"polygon\">画面</Radio.Button>\r\n              </Col>\r\n              <Col>\r\n                <Radio.Button value=\"modify\">修改</Radio.Button>\r\n                <Radio.Button value=\"translate\">脱拽</Radio.Button>\r\n              </Col>\r\n            </Row>\r\n          </Radio.Group>\r\n          <Row>\r\n            <Col>\r\n              <label>启用捕捉:</label>\r\n              <Switch checkedChildren=\"开启\" unCheckedChildren=\"关闭\" defaultChecked={snap} onChange={this.onChangeSnap} />\r\n              <Button onClick={() => this.handleOptionChange({ target: { value: 'undo' } })}>撤回</Button>\r\n              <Button onClick={() => this.handleOptionChange({ target: { value: 'delete' } })}>删除(单个)</Button>\r\n              <Button onClick={() => this.handleOptionChange({ target: { value: 'clear' } })}>清除(所有)</Button>\r\n            </Col>\r\n          </Row>\r\n          {/* <Row>\r\n            <Col>\r\n            <label>坐标系:</label>\r\n            <Radio.Group value={gs} onChange={this.handleGsChange}>\r\n            <Radio value=\"3857\">EPSG:3857</Radio>\r\n            <Radio value=\"4326\">EPSG:4326</Radio>\r\n            </Radio.Group>\r\n            </Col>\r\n          </Row> */}\r\n          <Button onClick={this.downLoad}>下载文件</Button>\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nexport default DrawPage;","import TileLayer from 'ol/layer/Tile';\r\nimport WMTS from 'ol/source/WMTS';\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS';\r\nimport { get as getProjection } from 'ol/proj';\r\nimport { getTopLeft, getWidth } from 'ol/extent';\r\n\r\nconst projection = getProjection('EPSG:3857');\r\nconst projectionExtent = projection.getExtent();\r\nconst size = getWidth(projectionExtent) / 256;\r\nconst resolutions = new Array(19);\r\nconst matrixIds = new Array(19);\r\nfor (let z = 0; z < 19; ++z) {\r\n  // generate resolutions and matrixIds arrays for this WMTS\r\n  resolutions[z] = size / Math.pow(2, z);\r\n  matrixIds[z] = z;\r\n}\r\n\r\nfunction TDTvec_cva() {\r\n  let layer = new TileLayer({\r\n    preload: 10,\r\n    opacity: 1,\r\n    source: new WMTS({\r\n      dimensions: { tk: \"de8da8b392c1c69e3bd20f90b84496a5\" },\r\n      url:\r\n        'http://t{0-7}.tianditu.gov.cn/cva_w/wmts?',\r\n      layer: 'cva',\r\n      matrixSet: 'w',\r\n      format: 'tiles',\r\n      projection: projection,\r\n      tileGrid: new WMTSTileGrid({\r\n        origin: getTopLeft(projectionExtent),\r\n        resolutions: resolutions,\r\n        matrixIds: matrixIds,\r\n      }),\r\n      style: 'default',\r\n      wrapX: true,\r\n    }),\r\n    properties: {\r\n      label: \"天地图-vec-cva\"\r\n    }\r\n  })\r\n  return layer;\r\n}\r\n\r\nexport {\r\n  TDTvec_cva\r\n}","import \"ol/ol.css\";\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport OSM from 'ol/source/OSM';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nimport { TDTvec } from './layer/WMTS/TDT_V2';\r\nimport { TDTvec_cva } from './layer/WMTS/TDT_V2_cva';\r\n\r\n\r\nfunction createMap(target) {\r\n  return new Map({\r\n    controls: [],\r\n    layers: [new TileLayer({\r\n      preload: 0,\r\n      source: new OSM(),\r\n      visible: true,\r\n      properties: {\r\n        title: \"OSM\",\r\n        label: \"OSM\"\r\n      }\r\n    }), TDTvec(), TDTvec_cva()],\r\n    target: target,\r\n    view: new View({\r\n      center: fromLonLat([116.397428, 39.906596]),\r\n      zoom: 9,\r\n    })\r\n  });\r\n}\r\n\r\nexport {\r\n  createMap\r\n}","import { createMap } from '../baseMap';\r\n\r\nimport { somelayer, AddLayer } from \"../Features/AddLayer\";\r\n\r\nimport { Travel } from '../Features/Travel';\r\n\r\nimport { OverlayMy } from '../Features/Overlay';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction firstMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    appMap.instance = instance;\r\n    // 添加travel\r\n    let travel = new Travel(instance);\r\n    appMap.travel = travel;\r\n    let overlay = new OverlayMy(instance);\r\n    appMap.overlay = overlay;\r\n    // 添加一些图层\r\n    // somelayer(instance);\r\n    // let layerContrl = new AddLayer(instance);\r\n    // layerContrl.toggleVisible('maptiler-satellite')\r\n    // appMap.layerContrl = layerContrl;\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  firstMap\r\n}","\r\nimport { easeIn, easeOut } from 'ol/easing';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nclass Travel {\r\n  constructor(map) {\r\n    this.map = map;\r\n    this.view = map.getView();\r\n  }\r\n\r\n  bounce(t) {\r\n    const s = 7.5625;\r\n    const p = 2.75;\r\n    let l;\r\n    if (t < 1 / p) {\r\n      l = s * t * t;\r\n    } else {\r\n      if (t < 2 / p) {\r\n        t -= 1.5 / p;\r\n        l = s * t * t + 0.75;\r\n      } else {\r\n        if (t < 2.5 / p) {\r\n          t -= 2.25 / p;\r\n          l = s * t * t + 0.9375;\r\n        } else {\r\n          t -= 2.625 / p;\r\n          l = s * t * t + 0.984375;\r\n        }\r\n      }\r\n    }\r\n    return l;\r\n  }\r\n\r\n  elastic(t) {\r\n    return (\r\n      Math.pow(2, -10 * t) * Math.sin(((t - 0.075) * (2 * Math.PI)) / 0.3) + 1\r\n    );\r\n  }\r\n\r\n  rotation(anchor) {\r\n    const rotation = this.view.getRotation();\r\n    this.view.animate(\r\n      {\r\n        rotation: rotation + Math.PI,\r\n        anchor: anchor,\r\n        easing: easeIn,\r\n      },\r\n      {\r\n        rotation: rotation + 2 * Math.PI,\r\n        anchor: anchor,\r\n        easing: easeOut,\r\n      }\r\n    );\r\n  }\r\n\r\n  pan(center) {\r\n    this.view.animate({\r\n      center: center,\r\n      duration: 2000,\r\n    });\r\n  }\r\n\r\n  elasticA(center) {\r\n    this.view.animate({\r\n      center: center,\r\n      duration: 2000,\r\n      easing: this.elastic,\r\n    });\r\n  }\r\n\r\n  bounceA(center) {\r\n    this.view.animate({\r\n      center: center,\r\n      duration: 2000,\r\n      easing: this.bounce,\r\n    });\r\n  }\r\n\r\n  spin(rome) {\r\n    const center = this.view.getCenter();\r\n    this.view.animate(\r\n      {\r\n        center: [\r\n          center[0] + (rome[0] - center[0]) / 2,\r\n          center[1] + (rome[1] - center[1]) / 2,\r\n        ],\r\n        rotation: Math.PI,\r\n        easing: easeIn,\r\n      },\r\n      {\r\n        center: rome,\r\n        rotation: 2 * Math.PI,\r\n        easing: easeOut,\r\n      }\r\n    );\r\n  }\r\n\r\n  flyTo(location, done) {\r\n    const duration = 2000;\r\n    const zoom = this.view.getZoom();\r\n    let parts = 2;\r\n    let called = false;\r\n    function callback(complete) {\r\n      --parts;\r\n      if (called) {\r\n        return;\r\n      }\r\n      if (parts === 0 || !complete) {\r\n        called = true;\r\n        done(complete);\r\n      }\r\n    }\r\n    this.view.animate(\r\n      {\r\n        center: location,\r\n        duration: duration,\r\n      },\r\n      callback\r\n    );\r\n    this.view.animate(\r\n      {\r\n        zoom: zoom - 1,\r\n        duration: duration / 2,\r\n      },\r\n      {\r\n        zoom: zoom,\r\n        duration: duration / 2,\r\n      },\r\n      callback\r\n    );\r\n  }\r\n\r\n  travel(center, type = \"pan\") {\r\n    switch (type) {\r\n      case \"rotation\": this.rotation(center); break;\r\n      case \"pan\": this.pan(center); break;\r\n      case \"elastic\": this.elasticA(center); break;\r\n      case \"bounce\": this.bounceA(center); break;\r\n      case \"spin\": this.spin(center); break;\r\n      case \"flyTo\": this.flyTo(center, function () { }); break;\r\n    }\r\n  }\r\n\r\n  goto(center) {\r\n    const london = fromLonLat([-0.12755, 51.507222]);\r\n    const moscow = fromLonLat([37.6178, 55.7517]);\r\n    const istanbul = fromLonLat([28.9744, 41.0128]);\r\n    const rome = fromLonLat([12.5, 41.9]);\r\n    const bern = fromLonLat([7.4458, 46.95]);\r\n    // this.travel(london, \"rotation\");\r\n    // this.travel(moscow, \"pan\");\r\n    // this.travel(istanbul, \"elastic\");\r\n    // this.travel(rome, \"bounce\");\r\n    // this.travel(bern, \"spin\");\r\n    this.travel(fromLonLat(center), \"flyTo\");\r\n  }\r\n}\r\n\r\nexport {\r\n  Travel\r\n}","import Overlay from 'ol/Overlay';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nclass OverlayMy {\r\n  constructor(map) {\r\n    this.map = map;\r\n    this.popup = this.createOverlay();\r\n    this.map.addOverlay(this.popup);\r\n  }\r\n\r\n  createOverlay() {\r\n    return new Overlay({\r\n      \r\n    })\r\n  }\r\n\r\n  hide() {\r\n    this.popup.setPosition(undefined);\r\n  }\r\n\r\n  show(coordinate) {\r\n    this.popup.setPosition(fromLonLat(coordinate));\r\n  }\r\n}\r\n\r\nexport {\r\n  OverlayMy\r\n}","import React from 'react';\r\nimport './index.less';\r\nimport { Row, Col, Space, Progress } from 'antd';\r\n\r\nimport { firstMap } from '../../map/Instance/firstMap';\r\n\r\nimport { Card } from 'antd';\r\n\r\nclass CityPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.popup = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n      current: 0,\r\n      currentPersent: 100,\r\n      citys: [\r\n        {\r\n          name: \"北京\", location: [116.397428, 39.906596],\r\n          description: '北京地处中国北部、华北平原北部，东与天津毗连，' +\r\n            '其余均与河北相邻，是世界著名古都和现代化国际城市。'\r\n        },\r\n        {\r\n          name: \"郑州\", location: [113.63077, 34.735145],\r\n          description: '郑州地处中国华中地区、黄河下游、中原腹地、河南中部偏北，' +\r\n            '属北温带大陆性季风气候，四季分明。'\r\n        },\r\n        {\r\n          name: \"重庆\", location: [106.545962, 29.580945],\r\n          description: '重庆是国家历史文化名城。1189年，宋光宗赵惇先封恭王再即帝位，自诩“双重喜庆”，重庆由此得名。'\r\n        },\r\n        {\r\n          name: \"武汉\", location: [114.324282, 30.598048],\r\n          description: '武汉是国家历史文化名城，楚文化的重要发祥地，境内盘龙城遗址有3500年历史。' +\r\n            '春秋战国以来，武汉一直是中国南方的军事和商业重镇。'\r\n        }]\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = firstMap(this.myRef.current);\r\n    ins.overlay.popup.setElement(this.popup.current);\r\n    ins.instance.getView().setZoom(9);\r\n    this.setState({\r\n      ins: ins\r\n    });\r\n    this.addInter();\r\n    this.clock = setInterval(() => {\r\n      this.setState(() => {\r\n        return {\r\n          currentPersent: (this.state.currentPersent - 100 / (7000 / 100))\r\n        }\r\n      });\r\n    }, 100)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.clearInter();\r\n    clearInterval(this.clock);\r\n  }\r\n\r\n  addInter() {\r\n    this.timerID = setInterval(() => {\r\n      this.tick()\r\n    }, 7000);\r\n  }\r\n\r\n  clearInter() {\r\n    clearInterval(this.timerID)\r\n  }\r\n\r\n  tick() {\r\n    this.setState({\r\n      current: (this.state.current + 1) % this.state.citys.length\r\n    });\r\n    this.goto(this.state.citys[this.state.current].location);\r\n  }\r\n\r\n  goto(center) {\r\n    this.setState({\r\n      currentPersent: 100\r\n    });\r\n    this.state.ins.overlay.hide();\r\n    this.state.ins.travel.goto(center);\r\n    this.state.ins.overlay.show(center);\r\n  }\r\n\r\n  customSelect = (idx) => {\r\n    this.clearInter();\r\n    this.setState({\r\n      current: idx\r\n    });\r\n    this.goto(this.state.citys[idx].location);\r\n    this.addInter();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>城市</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>列表</span>\r\n              </pre></h2>\r\n              <Space direction=\"vertical\">\r\n                {\r\n                  this.state.citys.map((city, idx) => {\r\n                    return (\r\n                      <div key={idx} style={{ width: \"90%\", margin: 'auto' }} onClick={() => { this.customSelect(idx) }}>\r\n                        <Card title={city.name} bordered={false}>\r\n                          {city.description}\r\n                          <Progress strokeWidth={5} percent={this.state.currentPersent} showInfo={false} style={{ display: this.state.current !== idx ? \"none\" : '' }} />\r\n                        </Card>\r\n                      </div>\r\n                    )\r\n                  })\r\n                }\r\n              </Space>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <div id=\"popup\" className=\"ol-popup\" ref={this.popup}>\r\n          <a href=\"#\" id=\"popup-closer\" className=\"ol-popup-closer\"></a>\r\n          <div id=\"popup-content\"><p>{this.state.citys[this.state.current].name}:</p><article>{this.state.citys[this.state.current].description}</article></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CityPage;","\r\nimport { Circle as CircleStyle, Fill, Stroke, Style } from 'ol/style';\r\nimport { Draw, Modify, Snap } from 'ol/interaction';\r\nimport {\r\n  createBox,\r\n  createRegularPolygon,\r\n} from 'ol/interaction/Draw';\r\nimport { GeometryCollection, Point, Polygon } from 'ol/geom';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { circular } from 'ol/geom/Polygon';\r\nimport { getDistance } from 'ol/sphere';\r\nimport { transform } from 'ol/proj';\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\n\r\nfunction drawTool(map) {\r\n\r\n  const source = new VectorSource();\r\n\r\n  const style = new Style({\r\n    fill: new Fill({\r\n      color: 'rgba(255, 255, 255, 0.2)',\r\n    }),\r\n    stroke: new Stroke({\r\n      color: '#ffcc33',\r\n      width: 2,\r\n    }),\r\n    image: new CircleStyle({\r\n      radius: 7,\r\n      fill: new Fill({\r\n        color: '#ffcc33',\r\n      }),\r\n    }),\r\n  });\r\n\r\n  const geodesicStyle = new Style({\r\n    geometry: function (feature) {\r\n      return feature.get('modifyGeometry') || feature.getGeometry();\r\n    },\r\n    fill: new Fill({\r\n      color: 'rgba(255, 255, 255, 0.2)',\r\n    }),\r\n    stroke: new Stroke({\r\n      color: '#ffcc33',\r\n      width: 2,\r\n    }),\r\n    image: new CircleStyle({\r\n      radius: 7,\r\n      fill: new Fill({\r\n        color: '#ffcc33',\r\n      }),\r\n    }),\r\n  });\r\n\r\n  const vector = new VectorLayer({\r\n    source: source,\r\n    style: function (feature) {\r\n      const geometry = feature.getGeometry();\r\n      return geometry.getType() === 'GeometryCollection' ? geodesicStyle : style;\r\n    },\r\n  });\r\n\r\n  map.addLayer(vector);\r\n\r\n\r\n  const defaultStyle = new Modify({ source: source })\r\n    .getOverlay()\r\n    .getStyleFunction();\r\n\r\n  const modify = new Modify({\r\n    source: source,\r\n    style: function (feature) {\r\n      feature.get('features').forEach(function (modifyFeature) {\r\n        const modifyGeometry = modifyFeature.get('modifyGeometry');\r\n        if (modifyGeometry) {\r\n          const modifyPoint = feature.getGeometry().getCoordinates();\r\n          const geometries = modifyFeature.getGeometry().getGeometries();\r\n          const polygon = geometries[0].getCoordinates()[0];\r\n          const center = geometries[1].getCoordinates();\r\n          const projection = map.getView().getProjection();\r\n          let first, last, radius;\r\n          if (modifyPoint[0] === center[0] && modifyPoint[1] === center[1]) {\r\n            // center is being modified\r\n            // get unchanged radius from diameter between polygon vertices\r\n            first = transform(polygon[0], projection, 'EPSG:4326');\r\n            last = transform(\r\n              polygon[(polygon.length - 1) / 2],\r\n              projection,\r\n              'EPSG:4326'\r\n            );\r\n            radius = getDistance(first, last) / 2;\r\n          } else {\r\n            // radius is being modified\r\n            first = transform(center, projection, 'EPSG:4326');\r\n            last = transform(modifyPoint, projection, 'EPSG:4326');\r\n            radius = getDistance(first, last);\r\n          }\r\n          // update the polygon using new center or radius\r\n          const circle = circular(\r\n            transform(center, projection, 'EPSG:4326'),\r\n            radius,\r\n            128\r\n          );\r\n          circle.transform('EPSG:4326', projection);\r\n          geometries[0].setCoordinates(circle.getCoordinates());\r\n          // save changes to be applied at the end of the interaction\r\n          modifyGeometry.setGeometries(geometries);\r\n        }\r\n      });\r\n      return defaultStyle(feature);\r\n    },\r\n  });\r\n\r\n  modify.on('modifystart', function (event) {\r\n    event.features.forEach(function (feature) {\r\n      const geometry = feature.getGeometry();\r\n      if (geometry.getType() === 'GeometryCollection') {\r\n        feature.set('modifyGeometry', geometry.clone(), true);\r\n      }\r\n    });\r\n  });\r\n\r\n  modify.on('modifyend', function (event) {\r\n    event.features.forEach(function (feature) {\r\n      const modifyGeometry = feature.get('modifyGeometry');\r\n      if (modifyGeometry) {\r\n        feature.setGeometry(modifyGeometry);\r\n        feature.unset('modifyGeometry', true);\r\n      }\r\n    });\r\n  });\r\n\r\n  map.addInteraction(modify);\r\n\r\n  let draw, snap; // global so we can remove them later\r\n  let type = \"None\"\r\n  // ['None', 'Square', 'Box', 'Star', 'Geodesic', 'Point', 'Circle', 'LineString', 'Polygon']\r\n\r\n  function addInteractions() {\r\n    let value = type;\r\n    if (value !== 'None') {\r\n      let geometryFunction;\r\n      if (value === 'Square') {\r\n        value = 'Circle';\r\n        geometryFunction = createRegularPolygon(4);\r\n      } else if (value === 'Box') {\r\n        value = 'Circle';\r\n        geometryFunction = createBox();\r\n      } else if (value === 'Star') {\r\n        value = 'Circle';\r\n        geometryFunction = function (coordinates, geometry) {\r\n          const center = coordinates[0];\r\n          const last = coordinates[coordinates.length - 1];\r\n          const dx = center[0] - last[0];\r\n          const dy = center[1] - last[1];\r\n          const radius = Math.sqrt(dx * dx + dy * dy);\r\n          const rotation = Math.atan2(dy, dx);\r\n          const newCoordinates = [];\r\n          const numPoints = 10;\r\n          for (let i = 0; i < numPoints; ++i) {\r\n            const angle = rotation + (i * 2 * Math.PI) / numPoints;\r\n            const fraction = i % 2 === 0 ? 1 : 0.5;\r\n            const offsetX = radius * fraction * Math.cos(angle);\r\n            const offsetY = radius * fraction * Math.sin(angle);\r\n            newCoordinates.push([center[0] + offsetX, center[1] + offsetY]);\r\n          }\r\n          newCoordinates.push(newCoordinates[0].slice());\r\n          if (!geometry) {\r\n            geometry = new Polygon([newCoordinates]);\r\n          } else {\r\n            geometry.setCoordinates([newCoordinates]);\r\n          }\r\n          return geometry;\r\n        };\r\n      } else if (value === 'Geodesic') {\r\n        value = 'Circle';\r\n        geometryFunction = function (coordinates, geometry, projection) {\r\n          if (!geometry) {\r\n            geometry = new GeometryCollection([\r\n              new Polygon([]),\r\n              new Point(coordinates[0]),\r\n            ]);\r\n          }\r\n          const geometries = geometry.getGeometries();\r\n          const center = transform(coordinates[0], projection, 'EPSG:4326');\r\n          const last = transform(coordinates[1], projection, 'EPSG:4326');\r\n          const radius = getDistance(center, last);\r\n          const circle = circular(center, radius, 128);\r\n          circle.transform('EPSG:4326', projection);\r\n          geometries[0].setCoordinates(circle.getCoordinates());\r\n          geometry.setGeometries(geometries);\r\n          return geometry;\r\n        };\r\n      }\r\n      draw = new Draw({\r\n        source: source,\r\n        type: value,\r\n        geometryFunction: geometryFunction,\r\n      });\r\n      map.addInteraction(draw);\r\n      snap = new Snap({ source: source });\r\n      map.addInteraction(snap);\r\n    }\r\n  }\r\n\r\n  function changeType() {\r\n    map.removeInteraction(draw);\r\n    map.removeInteraction(snap);\r\n    addInteractions();\r\n  }\r\n\r\n  function undo() {\r\n    draw.removeLastPoint();\r\n  }\r\n\r\n  function download() {\r\n    const features = source.getFeatures();\r\n    const format = new GeoJSON({ featureProjection: 'EPSG:3857' });\r\n    const json = format.writeFeatures(features);\r\n    let link = document.createElement(\"a\");\r\n    link.download = \"features.json\";\r\n    link.href = 'data:text/json;charset=utf-8,' + json;\r\n    link.click();\r\n  }\r\n\r\n  function setType(t) {\r\n    type = t;\r\n    changeType();\r\n  }\r\n\r\n  addInteractions();\r\n\r\n  return {\r\n    setType,\r\n    undo,\r\n    download\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  drawTool\r\n}","import { createMap } from '../baseMap';\r\n\r\nimport { drawTool } from '../Features/DrawTool';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction secondMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    appMap.instance = instance;\r\n    appMap.drawTool = drawTool(instance);\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  secondMap\r\n}","import React from 'react';\r\nimport './index.less';\r\n\r\nimport { Row, Col } from 'antd';\r\nimport { Select } from 'antd';\r\nimport { Button } from 'antd';\r\nimport { DownloadOutlined } from '@ant-design/icons';\r\n\r\nimport { secondMap } from '../../map/Instance/secondMap';\r\n\r\nconst { Option } = Select;\r\n\r\nclass DrawV2Page extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = secondMap(this.myRef.current);\r\n    this.setState({\r\n      ins: ins\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n\r\n  }\r\n\r\n  changeType = (value) => {\r\n    this.state.ins.drawTool.setType(value);\r\n  }\r\n\r\n  undo = () => {\r\n    this.state.ins.drawTool.undo();\r\n  }\r\n\r\n  download = () => {\r\n    this.state.ins.drawTool.download();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>绘制</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>工具</span>\r\n              </pre></h2>\r\n              <div>\r\n                <form className=\"draw-form\">\r\n                  <label>类型: &nbsp;</label>\r\n                  <Select defaultValue=\"None\" style={{ width: 120 }} onChange={this.changeType}>\r\n                    <Option value=\"Point\">Point(点)</Option>\r\n                    <Option value=\"LineString\">LineString(线)</Option>\r\n                    <Option value=\"Polygon\">Polygon(面)</Option>\r\n                    <Option value=\"Circle\">Circle(圆)</Option>\r\n                    <Option value=\"Square\">Square(方)</Option>\r\n                    <Option value=\"Box\">Box(矩)</Option>\r\n                    <Option value=\"Star\">Star(星)</Option>\r\n                    <Option value=\"Geodesic\">Geodesic(圆)</Option>\r\n                    <Option value=\"disabled\" disabled>\r\n                      Disabled\r\n                    </Option>\r\n                    <Option value=\"None\">None</Option>\r\n                  </Select>\r\n                  <Button onClick={this.undo}>撤回</Button>\r\n                  <Button icon={<DownloadOutlined />} onClick={this.download}>\r\n                    下载(GeoJSON)\r\n                  </Button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DrawV2Page;","import { createMap } from '../baseMap';\r\n\r\n// import { drawTool } from '../Features/DrawTool';\r\nimport { TDTserver } from '../layer/WMS/TDTserver';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction thirdMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    appMap.instance = instance;\r\n    // instance.getView().setCenter([-10997148, 4569099]);\r\n    // instance.getView().setZoom(4);\r\n    appMap.info = TDTserver(instance);\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  thirdMap\r\n}","import TileLayer from 'ol/layer/Tile';\r\nimport TileWMS from 'ol/source/TileWMS';\r\nimport BaseObject from 'ol/Object';\r\n\r\nfunction TDTserver(map) {\r\n  let OB = new BaseObject();\r\n  let layer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: 'https://gisserver.tianditu.gov.cn/TDTService/wms',\r\n      params: { 'LAYERS': 'LRRL', 'TILED': true },\r\n      serverType: 'geoserver',\r\n      // Countries have transparency, so do not fade tiles:\r\n      transition: 0,\r\n    }),\r\n  })\r\n  map.addLayer(layer);\r\n\r\n  map.on('singleclick', function (evt) {\r\n    let view = map.getView();\r\n    let wmsSource = layer.getSource();\r\n    const viewResolution = /** @type {number} */ (view.getResolution());\r\n    const url = wmsSource.getFeatureInfoUrl(\r\n      evt.coordinate,\r\n      viewResolution,\r\n      'EPSG:3857',\r\n      { 'INFO_FORMAT': 'application/json' }\r\n    );\r\n    if (url) {\r\n      fetch(url)\r\n        .then((response) => response.text())\r\n        .then((json) => {\r\n          let info = JSON.parse(json);\r\n          OB.setProperties({\r\n            info\r\n          })\r\n          OB.dispatchEvent(\"info\");\r\n        });\r\n    }\r\n  });\r\n  return OB;\r\n}\r\n\r\nexport {\r\n  TDTserver\r\n}","import React from 'react';\r\nimport './index.less';\r\nimport { Row, Col, Space } from 'antd';\r\n\r\nimport { thirdMap } from '../../map/Instance/thirdMap';\r\n\r\nimport { Card } from 'antd';\r\n\r\nclass GetInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n      pro: {}\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = thirdMap(this.myRef.current);\r\n    ins.info.on(\"info\", (e) => {\r\n      this.setState({\r\n        pro: e.target.getProperties().info.features[0] ? e.target.getProperties().info.features[0].properties : {}\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>信息</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>查询</span>\r\n              </pre></h2>\r\n              <Card title=\"属性列表\" style={{ width: \"80%\", margin: \"auto\" }}>\r\n                <Space direction=\"vertical\">\r\n                  <div>\r\n                    <span>GB(国标)：</span><span>{this.state.pro.GB}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span>NAME(名称)：</span><span>{this.state.pro.NAME}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span>OBJECTID(对象)：</span><span>{this.state.pro.OBJECTID}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span>RN(RN)：</span><span>{this.state.pro.RN}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span>Shape_Leng(长度)：</span><span>{this.state.pro.Shape_Leng}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span>TYPE(类型)：</span><span>{this.state.pro.TYPE}</span>\r\n                  </div>\r\n                </Space>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GetInfo;","import './measure.less';\r\nimport Draw from 'ol/interaction/Draw';\r\nimport Overlay from 'ol/Overlay';\r\nimport { Circle as CircleStyle, Fill, Stroke, Style } from 'ol/style';\r\nimport { LineString, Polygon } from 'ol/geom';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { getArea, getLength } from 'ol/sphere';\r\nimport { unByKey } from 'ol/Observable';\r\n\r\n\r\nfunction measure(map) {\r\n  const source = new VectorSource();\r\n\r\n  const vector = new VectorLayer({\r\n    source: source,\r\n    style: new Style({\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 0.2)',\r\n      }),\r\n      stroke: new Stroke({\r\n        color: '#ffcc33',\r\n        width: 2,\r\n      }),\r\n      image: new CircleStyle({\r\n        radius: 7,\r\n        fill: new Fill({\r\n          color: '#ffcc33',\r\n        }),\r\n      }),\r\n    }),\r\n  });\r\n\r\n  map.addLayer(vector);\r\n\r\n  /**\r\n   * Currently drawn feature.\r\n   * @type {import(\"../src/ol/Feature.js\").default}\r\n   */\r\n  let sketch;\r\n\r\n  /**\r\n   * The help tooltip element.\r\n   * @type {HTMLElement}\r\n   */\r\n  let helpTooltipElement;\r\n\r\n  /**\r\n   * Overlay to show the help messages.\r\n   * @type {Overlay}\r\n   */\r\n  let helpTooltip;\r\n\r\n  /**\r\n   * The measure tooltip element.\r\n   * @type {HTMLElement}\r\n   */\r\n  let measureTooltipElement;\r\n\r\n  /**\r\n   * Overlay to show the measurement.\r\n   * @type {Overlay}\r\n   */\r\n  let measureTooltip;\r\n\r\n  /**\r\n   * Message to show when the user is drawing a polygon.\r\n   * @type {string}\r\n   */\r\n  const continuePolygonMsg = '单击以继续绘制多边形';\r\n\r\n  /**\r\n   * Message to show when the user is drawing a line.\r\n   * @type {string}\r\n   */\r\n  const continueLineMsg = '单击以继续绘制线条';\r\n\r\n  /**\r\n   * Handle pointer move.\r\n   * @param {import(\"../src/ol/MapBrowserEvent\").default} evt The event.\r\n   */\r\n  const pointerMoveHandler = function (evt) {\r\n    if (evt.dragging) {\r\n      return;\r\n    }\r\n    /** @type {string} */\r\n    let helpMsg = '点击开始绘图';\r\n\r\n    if (sketch) {\r\n      const geom = sketch.getGeometry();\r\n      if (geom instanceof Polygon) {\r\n        helpMsg = continuePolygonMsg;\r\n      } else if (geom instanceof LineString) {\r\n        helpMsg = continueLineMsg;\r\n      }\r\n    }\r\n\r\n    helpTooltipElement.innerHTML = helpMsg;\r\n    helpTooltip.setPosition(evt.coordinate);\r\n\r\n    helpTooltipElement.classList.remove('hidden');\r\n  };\r\n\r\n  let maplistener;\r\n  function fun() {\r\n    helpTooltipElement.classList.add('hidden');\r\n  }\r\n  function addEventListener() {\r\n    maplistener = map.on('pointermove', pointerMoveHandler);\r\n\r\n    map.getViewport().addEventListener('mouseout', fun);\r\n  }\r\n  function removeEventListener() {\r\n    if (!!maplistener) {\r\n      unByKey(maplistener);\r\n      maplistener = null;\r\n      map.getViewport().removeEventListener('mouseout', fun);\r\n    }\r\n  }\r\n\r\n\r\n  let draw; // global so we can remove it later\r\n\r\n  /**\r\n   * Format length output.\r\n   * @param {LineString} line The line.\r\n   * @return {string} The formatted length.\r\n   */\r\n  const formatLength = function (line) {\r\n    const length = getLength(line);\r\n    let output;\r\n    if (length > 100) {\r\n      output = Math.round((length / 1000) * 100) / 100 + ' ' + 'km';\r\n    } else {\r\n      output = Math.round(length * 100) / 100 + ' ' + 'm';\r\n    }\r\n    return output;\r\n  };\r\n\r\n  /**\r\n   * Format area output.\r\n   * @param {Polygon} polygon The polygon.\r\n   * @return {string} Formatted area.\r\n   */\r\n  const formatArea = function (polygon) {\r\n    const area = getArea(polygon);\r\n    let output;\r\n    if (area > 10000) {\r\n      output = Math.round((area / 1000000) * 100) / 100 + ' ' + 'km<sup>2</sup>';\r\n    } else {\r\n      output = Math.round(area * 100) / 100 + ' ' + 'm<sup>2</sup>';\r\n    }\r\n    return output;\r\n  };\r\n\r\n  function addInteraction(type) {\r\n    // const type = 'Polygon' 'LineString';\r\n    draw = new Draw({\r\n      source: source,\r\n      type: type,\r\n      style: new Style({\r\n        fill: new Fill({\r\n          color: 'rgba(255, 255, 255, 0.2)',\r\n        }),\r\n        stroke: new Stroke({\r\n          color: 'rgba(0, 0, 0, 0.5)',\r\n          lineDash: [10, 10],\r\n          width: 2,\r\n        }),\r\n        image: new CircleStyle({\r\n          radius: 5,\r\n          stroke: new Stroke({\r\n            color: 'rgba(0, 0, 0, 0.7)',\r\n          }),\r\n          fill: new Fill({\r\n            color: 'rgba(255, 255, 255, 0.2)',\r\n          }),\r\n        }),\r\n      }),\r\n    });\r\n    map.addInteraction(draw);\r\n\r\n    createMeasureTooltip();\r\n    createHelpTooltip();\r\n\r\n    let listener;\r\n    draw.on('drawstart', function (evt) {\r\n      // set sketch\r\n      sketch = evt.feature;\r\n\r\n      /** @type {import(\"../src/ol/coordinate.js\").Coordinate|undefined} */\r\n      let tooltipCoord = evt.coordinate;\r\n\r\n      listener = sketch.getGeometry().on('change', function (evt) {\r\n        const geom = evt.target;\r\n        let output;\r\n        if (geom instanceof Polygon) {\r\n          output = formatArea(geom);\r\n          tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n        } else if (geom instanceof LineString) {\r\n          output = formatLength(geom);\r\n          tooltipCoord = geom.getLastCoordinate();\r\n        }\r\n        measureTooltipElement.innerHTML = output;\r\n        measureTooltip.setPosition(tooltipCoord);\r\n      });\r\n    });\r\n\r\n    draw.on('drawend', function () {\r\n      measureTooltipElement.className = 'ol-tooltip ol-tooltip-static';\r\n      measureTooltip.setOffset([0, -7]);\r\n      // unset sketch\r\n      sketch = null;\r\n      // unset tooltip so that a new one can be created\r\n      measureTooltipElement = null;\r\n      createMeasureTooltip();\r\n      unByKey(listener);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new help tooltip\r\n   */\r\n  function createHelpTooltip() {\r\n    if (helpTooltipElement) {\r\n      helpTooltipElement.parentNode.removeChild(helpTooltipElement);\r\n    }\r\n    helpTooltipElement = document.createElement('div');\r\n    helpTooltipElement.className = 'ol-tooltip hidden';\r\n    helpTooltip = new Overlay({\r\n      element: helpTooltipElement,\r\n      offset: [15, 0],\r\n      positioning: 'center-left',\r\n    });\r\n    map.addOverlay(helpTooltip);\r\n  }\r\n\r\n  /**\r\n   * Creates a new measure tooltip\r\n   */\r\n  let measureTooltips = [];\r\n  function createMeasureTooltip() {\r\n    if (measureTooltipElement) {\r\n      measureTooltipElement.parentNode.removeChild(measureTooltipElement);\r\n    }\r\n    measureTooltipElement = document.createElement('div');\r\n    measureTooltipElement.className = 'ol-tooltip ol-tooltip-measure';\r\n    measureTooltip = new Overlay({\r\n      element: measureTooltipElement,\r\n      offset: [0, -15],\r\n      positioning: 'bottom-center',\r\n      stopEvent: false,\r\n      insertFirst: false,\r\n    });\r\n    measureTooltips.push(measureTooltip);\r\n    map.addOverlay(measureTooltip);\r\n  }\r\n\r\n  /**\r\n   * Let user change the geometry type.\r\n   */\r\n  let change = function (type) {\r\n    removeEventListener();\r\n    map.removeInteraction(draw);\r\n    switch (type) {\r\n      case \"None\":\r\n        break;\r\n      case \"Polygon\":\r\n        addEventListener();\r\n        addInteraction(\"Polygon\");\r\n        break;\r\n      case \"LineString\":\r\n        addEventListener();\r\n        addInteraction(\"LineString\");\r\n        break;\r\n    }\r\n  };\r\n\r\n  let clear = function () {\r\n    let temp = measureTooltips.pop();\r\n    measureTooltips.forEach((item) => {\r\n      map.removeOverlay(item);\r\n    });\r\n    measureTooltips = [temp];\r\n    source.clear();\r\n  }\r\n\r\n  change(\"None\");\r\n\r\n  return {\r\n    change,\r\n    clear\r\n  }\r\n}\r\n\r\nexport {\r\n  measure\r\n}","\r\nimport {\r\n  Circle as CircleStyle,\r\n  Fill,\r\n  RegularShape,\r\n  Stroke,\r\n  Style,\r\n  Text,\r\n} from 'ol/style';\r\nimport { Draw, Modify } from 'ol/interaction';\r\nimport { LineString, Point } from 'ol/geom';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { getArea, getLength } from 'ol/sphere';\r\n\r\n\r\nfunction measureV2(map) {\r\n  let typeSelect = \"None\";\r\n  let showSegments = false;\r\n  let clearPrevious = false;\r\n\r\n  const style = new Style({\r\n    fill: new Fill({\r\n      color: 'rgba(255, 255, 255, 0.2)',\r\n    }),\r\n    stroke: new Stroke({\r\n      color: 'rgba(0, 0, 0, 0.5)',\r\n      lineDash: [10, 10],\r\n      width: 2,\r\n    }),\r\n    image: new CircleStyle({\r\n      radius: 5,\r\n      stroke: new Stroke({\r\n        color: 'rgba(0, 0, 0, 0.7)',\r\n      }),\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 0.2)',\r\n      }),\r\n    }),\r\n  });\r\n\r\n  const labelStyle = new Style({\r\n    text: new Text({\r\n      font: '14px Calibri,sans-serif',\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 1)',\r\n      }),\r\n      backgroundFill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.7)',\r\n      }),\r\n      padding: [3, 3, 3, 3],\r\n      textBaseline: 'bottom',\r\n      offsetY: -15,\r\n    }),\r\n    image: new RegularShape({\r\n      radius: 8,\r\n      points: 3,\r\n      angle: Math.PI,\r\n      displacement: [0, 10],\r\n      fill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.7)',\r\n      }),\r\n    }),\r\n  });\r\n\r\n  const tipStyle = new Style({\r\n    text: new Text({\r\n      font: '12px Calibri,sans-serif',\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 1)',\r\n      }),\r\n      backgroundFill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.4)',\r\n      }),\r\n      padding: [2, 2, 2, 2],\r\n      textAlign: 'left',\r\n      offsetX: 15,\r\n    }),\r\n  });\r\n\r\n  const modifyStyle = new Style({\r\n    image: new CircleStyle({\r\n      radius: 5,\r\n      stroke: new Stroke({\r\n        color: 'rgba(0, 0, 0, 0.7)',\r\n      }),\r\n      fill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.4)',\r\n      }),\r\n    }),\r\n    text: new Text({\r\n      text: '拖动修改',\r\n      font: '12px Calibri,sans-serif',\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 1)',\r\n      }),\r\n      backgroundFill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.7)',\r\n      }),\r\n      padding: [2, 2, 2, 2],\r\n      textAlign: 'left',\r\n      offsetX: 15,\r\n    }),\r\n  });\r\n\r\n  const segmentStyle = new Style({\r\n    text: new Text({\r\n      font: '12px Calibri,sans-serif',\r\n      fill: new Fill({\r\n        color: 'rgba(255, 255, 255, 1)',\r\n      }),\r\n      backgroundFill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.4)',\r\n      }),\r\n      padding: [2, 2, 2, 2],\r\n      textBaseline: 'bottom',\r\n      offsetY: -12,\r\n    }),\r\n    image: new RegularShape({\r\n      radius: 6,\r\n      points: 3,\r\n      angle: Math.PI,\r\n      displacement: [0, 8],\r\n      fill: new Fill({\r\n        color: 'rgba(0, 0, 0, 0.4)',\r\n      }),\r\n    }),\r\n  });\r\n\r\n  const segmentStyles = [segmentStyle];\r\n\r\n  const formatLength = function (line) {\r\n    const length = getLength(line);\r\n    let output;\r\n    if (length > 100) {\r\n      output = Math.round((length / 1000) * 100) / 100 + ' km';\r\n    } else {\r\n      output = Math.round(length * 100) / 100 + ' m';\r\n    }\r\n    return output;\r\n  };\r\n\r\n  const formatArea = function (polygon) {\r\n    const area = getArea(polygon);\r\n    let output;\r\n    if (area > 10000) {\r\n      output = Math.round((area / 1000000) * 100) / 100 + ' km\\xB2';\r\n    } else {\r\n      output = Math.round(area * 100) / 100 + ' m\\xB2';\r\n    }\r\n    return output;\r\n  };\r\n\r\n  const source = new VectorSource();\r\n\r\n  const modify = new Modify({ source: source, style: modifyStyle });\r\n\r\n  let tipPoint;\r\n\r\n  function styleFunction(feature, segments, drawType, tip) {\r\n    const styles = [style];\r\n    const geometry = feature.getGeometry();\r\n    const type = geometry.getType();\r\n    let point, label, line;\r\n    if (!drawType || drawType === type) {\r\n      if (type === 'Polygon') {\r\n        point = geometry.getInteriorPoint();\r\n        label = formatArea(geometry);\r\n        line = new LineString(geometry.getCoordinates()[0]);\r\n      } else if (type === 'LineString') {\r\n        point = new Point(geometry.getLastCoordinate());\r\n        label = formatLength(geometry);\r\n        line = geometry;\r\n      }\r\n    }\r\n    if (segments && line) {\r\n      let count = 0;\r\n      line.forEachSegment(function (a, b) {\r\n        const segment = new LineString([a, b]);\r\n        const label = formatLength(segment);\r\n        if (segmentStyles.length - 1 < count) {\r\n          segmentStyles.push(segmentStyle.clone());\r\n        }\r\n        const segmentPoint = new Point(segment.getCoordinateAt(0.5));\r\n        segmentStyles[count].setGeometry(segmentPoint);\r\n        segmentStyles[count].getText().setText(label);\r\n        styles.push(segmentStyles[count]);\r\n        count++;\r\n      });\r\n    }\r\n    if (label) {\r\n      labelStyle.setGeometry(point);\r\n      labelStyle.getText().setText(label);\r\n      styles.push(labelStyle);\r\n    }\r\n    if (\r\n      tip &&\r\n      type === 'Point' &&\r\n      !modify.getOverlay().getSource().getFeatures().length\r\n    ) {\r\n      tipPoint = geometry;\r\n      tipStyle.getText().setText(tip);\r\n      styles.push(tipStyle);\r\n    }\r\n    return styles;\r\n  }\r\n\r\n  const vector = new VectorLayer({\r\n    source: source,\r\n    style: function (feature) {\r\n      return styleFunction(feature, showSegments);\r\n    },\r\n  });\r\n\r\n  map.addLayer(vector);\r\n\r\n  map.addInteraction(modify);\r\n\r\n  let draw; // global so we can remove it later\r\n\r\n  function addInteraction() {\r\n    const drawType = typeSelect;\r\n    const activeTip =\r\n      '单击以继续绘制' +\r\n      (drawType === 'Polygon' ? '多边形' : '线条');\r\n    const idleTip = '点击开始测量';\r\n    let tip = idleTip;\r\n    draw = new Draw({\r\n      source: source,\r\n      type: drawType,\r\n      style: function (feature) {\r\n        return styleFunction(feature, showSegments, drawType, tip);\r\n      },\r\n    });\r\n    draw.on('drawstart', function () {\r\n      if (clearPrevious) {\r\n        source.clear();\r\n      }\r\n      modify.setActive(false);\r\n      tip = activeTip;\r\n    });\r\n    draw.on('drawend', function () {\r\n      modifyStyle.setGeometry(tipPoint);\r\n      modify.setActive(true);\r\n      map.once('pointermove', function () {\r\n        modifyStyle.setGeometry();\r\n      });\r\n      tip = idleTip;\r\n    });\r\n    modify.setActive(true);\r\n    map.addInteraction(draw);\r\n  }\r\n\r\n  // typeSelect.onchange = function () {\r\n  //   map.removeInteraction(draw);\r\n  //   addInteraction();\r\n  // };\r\n  function changeType(type) {\r\n    map.removeInteraction(draw);\r\n    switch (type) {\r\n      case \"Polygon\": typeSelect = \"Polygon\"; break;\r\n      case \"LineString\": typeSelect = \"LineString\"; break;\r\n      case \"None\": typeSelect = \"None\"; return; break;\r\n    }\r\n    addInteraction();\r\n  }\r\n\r\n  changeType(\"None\");\r\n\r\n  // showSegments.onchange = function () {\r\n  //   vector.changed();\r\n  //   draw.getOverlay().changed();\r\n  // };\r\n  function showSegmentsChange() {\r\n    showSegments = !showSegments;\r\n    vector.changed();\r\n    draw.getOverlay().changed();\r\n  }\r\n\r\n  function clearPreviousChange() {\r\n    clearPrevious = !clearPrevious;\r\n  }\r\n\r\n  function clear() {\r\n    source.clear();\r\n  }\r\n\r\n  return {\r\n    changeType,\r\n    showSegmentsChange,\r\n    clearPreviousChange,\r\n    clear\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  measureV2\r\n}","import { createMap } from '../baseMap';\r\n\r\nimport { measure } from '../Features/Measure';\r\nimport { measureV2 } from '../Features/Measure_V2';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction fourthMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    appMap.instance = instance;\r\n    instance.getView().setZoom(14);\r\n    appMap.measure = measure(instance);\r\n    appMap.measureV2 = measureV2(instance);\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  fourthMap\r\n}","import React from 'react';\r\nimport './index.less';\r\nimport { Row, Col, Button } from 'antd';\r\n\r\nimport { fourthMap } from '../../map/Instance/fourthMap';\r\n\r\nimport { Card } from 'antd';\r\nimport { Select } from 'antd';\r\nimport { Checkbox } from 'antd';\r\n\r\nconst { Option } = Select;\r\n\r\nclass MeasurePage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = fourthMap(this.myRef.current);\r\n    this.setState({\r\n      ins: ins\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  change = (value) => {\r\n    this.state.ins.measure.change(value);\r\n  }\r\n\r\n  clear = () => {\r\n    this.state.ins.measure.clear();\r\n  }\r\n\r\n  change2 = (value) => {\r\n    this.state.ins.measureV2.changeType(value);\r\n  }\r\n\r\n  change3 = () => {\r\n    this.state.ins.measureV2.showSegmentsChange();\r\n  }\r\n  change4 = () => {\r\n    this.state.ins.measureV2.clearPreviousChange();\r\n  }\r\n\r\n  clear1 = () => {\r\n    this.state.ins.measureV2.clear();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>测量</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>工具</span>\r\n              </pre></h2>\r\n              <Card style={{ width: \"90%\", margin: 'auto' }}>\r\n                <h2>版本一</h2>\r\n                <label>测量类型(长度/面积)</label>\r\n                <Select defaultValue=\"None\" onChange={this.change}>\r\n                  <Option value=\"Polygon\">Polygon</Option>\r\n                  <Option value=\"LineString\">LineString</Option>\r\n                  <Option value=\"disabled\" disabled>\r\n                    Disabled\r\n                  </Option>\r\n                  <Option value=\"None\">None</Option>\r\n                </Select>\r\n                <Button type=\"primary\" onClick={this.clear}>清除</Button>\r\n              </Card>\r\n              <Card style={{ width: \"90%\", margin: 'auto' }}>\r\n                <h2>版本二</h2>\r\n                <form className=\"form-inline\">\r\n                  <label>测量类型 &nbsp;</label>\r\n                  <Select defaultValue=\"None\" onChange={this.change2}>\r\n                    <Option value=\"LineString\">Length (LineString)</Option>\r\n                    <Option value=\"Polygon\">Area (Polygon)</Option>\r\n                    <Option value=\"None\">None (None)</Option>\r\n                  </Select>\r\n                  <br />\r\n                  <Checkbox onChange={this.change3} >显示段长度&nbsp;</Checkbox>\r\n                  <Checkbox onChange={this.change4} >清除先前的测量&nbsp;</Checkbox>\r\n                  <Button type=\"primary\" onClick={this.clear1}>清除</Button>\r\n                </form>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MeasurePage;","import { createMap } from '../baseMap';\r\n\r\nimport { USA_Population } from '../layer/WMS/USA_Population';\r\n\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction fifthMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    appMap.instance = instance;\r\n    instance.getView().setZoom(5);\r\n    instance.getView().setCenter(fromLonLat([-97.65, 38.68]));\r\n\r\n    appMap.project = USA_Population(instance);\r\n\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  fifthMap\r\n}","import TileLayer from 'ol/layer/Tile';\r\nimport TileWMS from 'ol/source/TileWMS';\r\n\r\nfunction USA_Population(map) {\r\n\r\n  let layer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: 'http://localhost:8080/geoserver/topp/wms',\r\n      params: { 'LAYERS': 'topp:states', 'STYLES': 'pophatch', 'TILED': true },\r\n      serverType: 'geoserver',\r\n      // Countries have transparency, so do not fade tiles:\r\n      transition: 0,\r\n    }),\r\n  })\r\n  map.addLayer(layer);\r\n\r\n  map.on('singleclick', function (evt) {\r\n    let view = map.getView();\r\n    let wmsSource = layer.getSource();\r\n    const viewResolution = /** @type {number} */ (view.getResolution());\r\n    const url = wmsSource.getFeatureInfoUrl(\r\n      evt.coordinate,\r\n      viewResolution,\r\n      'EPSG:3857',\r\n      { 'INFO_FORMAT': 'application/json' }\r\n    );\r\n    if (url) {\r\n      fetch(url)\r\n        .then((response) => response.text())\r\n        .then((json) => {\r\n          console.log(JSON.parse(json))\r\n        });\r\n    }\r\n  });\r\n\r\n  function update() {\r\n    let params = layer.getSource().getParams();\r\n    params.CQL_FILTER = 'DISJOINT(the_geom, POLYGON((-90 40, -90 45, -60 45, -60 40, -90 40))) and PERSONS BETWEEN 1000000 AND 3000000';\r\n    // params.clip = 'srid=900913;MULTIPOLYGON(((-11359486.0071893 4528899.21961765,-11359432.4625143 4541971.11690461,-11359664.3410136 4615342.53548874,-11359607.4567538 4616692.44803748,-11359834.2145565 4666741.9519741,-11359832.5447642 4677725.62563103,-11359988.7260097 4726972.74840461,-11359866.4972089 4739843.86257777,-11359969.2450989 4802612.7850149,-11360040.6008925 4803463.31922457,-11360273.2586282 4865786.50060748,-11359829.0938599 4915861.04166173,-11359837.5541412 4928785.40690285,-11359660.8901094 4967798.86490296,-11359767.9794595 4974527.49690069,-11359851.1351191 5012058.02592409,-11423693.976284 5012374.8513528,-11427146.3276519 5012066.58066503,-11508483.8060314 5012390.63389506,-11529562.5968911 5012292.10405054,-11582926.7117486 5012817.65726345,-11681195.8846777 5011501.68893432,-11719522.1834824 5011805.51696107,-11822452.303491 5012358.03633596,-11836439.4861897 5012535.77548496,-11896139.3498657 5012118.79424704,-11944963.8558886 5012366.44384074,-12013380.9262497 5012844.6510808,-12139127.5343692 5012116.58180143,-12138887.1955886 4963102.39125288,-12139456.2608255 4896585.4416563,-12139600.6422051 4816282.21333699,-12139709.2900281 4796172.87399985,-12139474.0719441 4773512.85271234,-12139756.0442143 4649542.72107015,-12139969.2210391 4614084.2224471,-12138589.0819923 4601054.1160955,-12138560.2502441 4563535.34761816,-12138826.8604246 4527404.80029228,-12139147.905836 4438638.87507201,-12063897.3772132 4439033.46988755,-11963712.1732085 4438935.62126924,-11956850.662435 4438761.11287027,-11898915.6579661 4438977.57619295,-11895673.9230747 4437642.06938799,-11852362.9601112 4437921.08748282,-11798911.4594534 4438030.07656547,-11767905.1964048 4438345.90036369,-11712205.487311 4438072.58539892,-11704756.3209456 4438156.62795493,-11576460.1625284 4438332.65954768,-11474521.1199463 4439070.68605217,-11465598.4174812 4438898.40557889,-11358679.9427565 4437569.73772394,-11359214.1649928 4493084.22064346,-11359486.0071893 4528899.21961765)))';\r\n    // params.FeatureID = 'states.15';\r\n    layer.getSource().updateParams(params);\r\n  }\r\n\r\n  function update2() {\r\n    let params = layer.getSource().getParams();\r\n    // params.CQL_FILTER = 'DISJOINT(the_geom, POLYGON((-90 40, -90 45, -60 45, -60 40, -90 40))) and PERSONS BETWEEN 1000000 AND 3000000';\r\n    params.clip = 'srid=900913;MULTIPOLYGON(((-11359486.0071893 4528899.21961765,-11359432.4625143 4541971.11690461,-11359664.3410136 4615342.53548874,-11359607.4567538 4616692.44803748,-11359834.2145565 4666741.9519741,-11359832.5447642 4677725.62563103,-11359988.7260097 4726972.74840461,-11359866.4972089 4739843.86257777,-11359969.2450989 4802612.7850149,-11360040.6008925 4803463.31922457,-11360273.2586282 4865786.50060748,-11359829.0938599 4915861.04166173,-11359837.5541412 4928785.40690285,-11359660.8901094 4967798.86490296,-11359767.9794595 4974527.49690069,-11359851.1351191 5012058.02592409,-11423693.976284 5012374.8513528,-11427146.3276519 5012066.58066503,-11508483.8060314 5012390.63389506,-11529562.5968911 5012292.10405054,-11582926.7117486 5012817.65726345,-11681195.8846777 5011501.68893432,-11719522.1834824 5011805.51696107,-11822452.303491 5012358.03633596,-11836439.4861897 5012535.77548496,-11896139.3498657 5012118.79424704,-11944963.8558886 5012366.44384074,-12013380.9262497 5012844.6510808,-12139127.5343692 5012116.58180143,-12138887.1955886 4963102.39125288,-12139456.2608255 4896585.4416563,-12139600.6422051 4816282.21333699,-12139709.2900281 4796172.87399985,-12139474.0719441 4773512.85271234,-12139756.0442143 4649542.72107015,-12139969.2210391 4614084.2224471,-12138589.0819923 4601054.1160955,-12138560.2502441 4563535.34761816,-12138826.8604246 4527404.80029228,-12139147.905836 4438638.87507201,-12063897.3772132 4439033.46988755,-11963712.1732085 4438935.62126924,-11956850.662435 4438761.11287027,-11898915.6579661 4438977.57619295,-11895673.9230747 4437642.06938799,-11852362.9601112 4437921.08748282,-11798911.4594534 4438030.07656547,-11767905.1964048 4438345.90036369,-11712205.487311 4438072.58539892,-11704756.3209456 4438156.62795493,-11576460.1625284 4438332.65954768,-11474521.1199463 4439070.68605217,-11465598.4174812 4438898.40557889,-11358679.9427565 4437569.73772394,-11359214.1649928 4493084.22064346,-11359486.0071893 4528899.21961765)))';\r\n    // params.FeatureID = 'states.15';\r\n    layer.getSource().updateParams(params);\r\n  }\r\n\r\n  function update3() {\r\n    let params = layer.getSource().getParams();\r\n    // params.CQL_FILTER = 'DISJOINT(the_geom, POLYGON((-90 40, -90 45, -60 45, -60 40, -90 40))) and PERSONS BETWEEN 1000000 AND 3000000';\r\n    // params.clip = 'srid=900913;MULTIPOLYGON(((-11359486.0071893 4528899.21961765,-11359432.4625143 4541971.11690461,-11359664.3410136 4615342.53548874,-11359607.4567538 4616692.44803748,-11359834.2145565 4666741.9519741,-11359832.5447642 4677725.62563103,-11359988.7260097 4726972.74840461,-11359866.4972089 4739843.86257777,-11359969.2450989 4802612.7850149,-11360040.6008925 4803463.31922457,-11360273.2586282 4865786.50060748,-11359829.0938599 4915861.04166173,-11359837.5541412 4928785.40690285,-11359660.8901094 4967798.86490296,-11359767.9794595 4974527.49690069,-11359851.1351191 5012058.02592409,-11423693.976284 5012374.8513528,-11427146.3276519 5012066.58066503,-11508483.8060314 5012390.63389506,-11529562.5968911 5012292.10405054,-11582926.7117486 5012817.65726345,-11681195.8846777 5011501.68893432,-11719522.1834824 5011805.51696107,-11822452.303491 5012358.03633596,-11836439.4861897 5012535.77548496,-11896139.3498657 5012118.79424704,-11944963.8558886 5012366.44384074,-12013380.9262497 5012844.6510808,-12139127.5343692 5012116.58180143,-12138887.1955886 4963102.39125288,-12139456.2608255 4896585.4416563,-12139600.6422051 4816282.21333699,-12139709.2900281 4796172.87399985,-12139474.0719441 4773512.85271234,-12139756.0442143 4649542.72107015,-12139969.2210391 4614084.2224471,-12138589.0819923 4601054.1160955,-12138560.2502441 4563535.34761816,-12138826.8604246 4527404.80029228,-12139147.905836 4438638.87507201,-12063897.3772132 4439033.46988755,-11963712.1732085 4438935.62126924,-11956850.662435 4438761.11287027,-11898915.6579661 4438977.57619295,-11895673.9230747 4437642.06938799,-11852362.9601112 4437921.08748282,-11798911.4594534 4438030.07656547,-11767905.1964048 4438345.90036369,-11712205.487311 4438072.58539892,-11704756.3209456 4438156.62795493,-11576460.1625284 4438332.65954768,-11474521.1199463 4439070.68605217,-11465598.4174812 4438898.40557889,-11358679.9427565 4437569.73772394,-11359214.1649928 4493084.22064346,-11359486.0071893 4528899.21961765)))';\r\n    params.FeatureID = 'states.15';\r\n    layer.getSource().updateParams(params);\r\n  }\r\n\r\n  function clear() {\r\n    let params = layer.getSource().getParams();\r\n    delete params.CQL_FILTER;\r\n    delete params.clip;\r\n    delete params.FeatureID;\r\n    layer.getSource().updateParams(params);\r\n\r\n  }\r\n\r\n  return { update, update2, update3, clear };\r\n}\r\n\r\nexport {\r\n  USA_Population\r\n}","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\n\r\nimport { fifthMap } from '../../map/Instance/fifthMap';\r\n\r\n\r\nclass ProjectPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = fifthMap(this.myRef.current);\r\n    this.setState({\r\n      ins: ins\r\n    })\r\n  }\r\n\r\n  dosomething = () => {\r\n    this.state.ins.project.update();\r\n  }\r\n\r\n  dosomething2 = () => {\r\n    this.state.ins.project.update2();\r\n  }\r\n\r\n  dosomething3 = () => {\r\n    this.state.ins.project.update3();\r\n  }\r\n\r\n  clear = () => {\r\n    this.state.ins.project.clear();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>项目</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>审查</span>\r\n              </pre></h2>\r\n              <p>\r\n                <button onClick={this.clear}>还原</button>\r\n                <div>\r\n                  <button onClick={this.dosomething}>使用筛选1</button>\r\n                  <button onClick={this.dosomething2}>使用筛选2</button>\r\n                  <button onClick={this.dosomething3}>使用筛选3</button>\r\n                </div>\r\n                <div>\r\n                  <label>筛选1:</label>\r\n                  <code>\r\n                    'CQL_FILTER': 'DISJOINT(the_geom, POLYGON((-90 40, -90 45, -60 45, -60 40, -90 40)))\r\n                    and PERSONS BETWEEN 1000000 AND 3000000'\r\n                  </code>\r\n                </div>\r\n                <div>\r\n                  <label>筛选2:</label>\r\n                  <code>\r\n                    'clip': 'srid=900913;MULTIPOLYGON(((...)))'\r\n                  </code>\r\n                </div>\r\n                <div>\r\n                  <label>筛选3:</label>\r\n                  <code>\r\n                    FeatureID = 'states.15'\r\n                  </code>\r\n                </div>\r\n              </p>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default ProjectPage;","import TileLayer from 'ol/layer/Tile';\r\nimport TileWMS from 'ol/source/TileWMS';\r\nimport LayerGroup from 'ol/layer/Group';\r\n\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\n\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport { Fill, Stroke, Circle, Style } from 'ol/style';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\n\r\nvar styles = [];\r\nvar white = [255, 255, 255, 1];\r\nvar blue = [0, 153, 255, 1];\r\nvar width = 3;\r\nstyles[GeometryType.POLYGON] = [\r\n  new Style({\r\n    fill: new Fill({\r\n      color: [255, 255, 255, 0.5]\r\n    })\r\n  })\r\n];\r\nstyles[GeometryType.MULTI_POLYGON] =\r\n  styles[GeometryType.POLYGON];\r\nstyles[GeometryType.LINE_STRING] = [\r\n  new Style({\r\n    stroke: new Stroke({\r\n      color: white,\r\n      width: width + 2\r\n    })\r\n  }),\r\n  new Style({\r\n    stroke: new Stroke({\r\n      color: blue,\r\n      width: width\r\n    })\r\n  })\r\n];\r\nstyles[GeometryType.MULTI_LINE_STRING] =\r\n  styles[GeometryType.LINE_STRING];\r\nstyles[GeometryType.POINT] = [\r\n  new Style({\r\n    image: new Circle({\r\n      radius: width * 2,\r\n      fill: new Fill({\r\n        color: blue\r\n      }),\r\n      stroke: new Stroke({\r\n        color: white,\r\n        width: width / 2\r\n      })\r\n    }),\r\n    zIndex: Infinity\r\n  })\r\n];\r\nstyles[GeometryType.MULTI_POINT] =\r\n  styles[GeometryType.POINT];\r\nstyles[GeometryType.GEOMETRY_COLLECTION] =\r\n  styles[GeometryType.POLYGON].concat(\r\n    styles[GeometryType.LINE_STRING],\r\n    styles[GeometryType.POINT]\r\n  );\r\n\r\nfunction transaction(map) {\r\n\r\n  let source = new VectorSource();\r\n  let highlight = new VectorLayer({\r\n    source: source,\r\n    style: function (feature) {\r\n      return styles[feature.getGeometry().getType()]\r\n    }\r\n  });\r\n\r\n  let lyrGp = new LayerGroup();\r\n  lyrGp.set(\"label\", \"lyrgp\")\r\n\r\n  let layer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: 'http://localhost:8080/geoserver/test/wms',\r\n      params: { 'LAYERS': 'test:sld_cookbook_polygon', 'TILED': true },\r\n      serverType: 'geoserver',\r\n      // Countries have transparency, so do not fade tiles:\r\n      transition: 0,\r\n    }),\r\n  })\r\n  lyrGp.getLayers().push(layer);\r\n\r\n  layer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: 'http://localhost:8080/geoserver/test/wms',\r\n      params: { 'LAYERS': 'test:sld_cookbook_line', 'TILED': true },\r\n      serverType: 'geoserver',\r\n      // Countries have transparency, so do not fade tiles:\r\n      transition: 0,\r\n    }),\r\n  })\r\n  lyrGp.getLayers().push(layer);\r\n\r\n  layer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: 'http://localhost:8080/geoserver/test/wms',\r\n      params: { 'LAYERS': 'test:sld_cookbook_point', 'TILED': true },\r\n      serverType: 'geoserver',\r\n      // Countries have transparency, so do not fade tiles:\r\n      transition: 0,\r\n    }),\r\n  })\r\n  lyrGp.getLayers().push(layer);\r\n  lyrGp.getLayers().push(highlight);\r\n\r\n  map.addLayer(lyrGp);\r\n\r\n  map.on('singleclick', function (evt) {\r\n    let view = map.getView();\r\n    let wmsSource = lyrGp.getLayers().item(1).getSource();\r\n    const viewResolution = /** @type {number} */ (view.getResolution());\r\n    const url = wmsSource.getFeatureInfoUrl(\r\n      evt.coordinate,\r\n      viewResolution,\r\n      'EPSG:3857',\r\n      { 'INFO_FORMAT': 'application/json' }\r\n    );\r\n    if (url) {\r\n      fetch(url)\r\n        .then((response) => response.text())\r\n        .then((json) => {\r\n          console.log(JSON.parse(json))\r\n          source.clear();\r\n          const features = new GeoJSON().readFeatures(json);\r\n          source.addFeatures(features);\r\n        });\r\n    }\r\n  });\r\n\r\n}\r\n\r\nexport default transaction","import { createMap } from '../baseMap';\r\nimport sync from 'ol-hashed';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nimport { data_filter_sz } from './../layer/WFS/data_filter_sz_Trans';\r\n\r\nimport transaction from '../Features/Transaction';\r\n\r\nlet appMap = {};\r\nlet instance;\r\n\r\nfunction sixthMap(ele) {\r\n  if (!!ele) {\r\n    instance = createMap(ele);\r\n    const unregister = sync(instance);\r\n    appMap.destroy = function () {\r\n      unregister()\r\n    }\r\n    appMap.instance = instance;\r\n    instance.getView().setZoom(1);\r\n    instance.getView().setCenter(fromLonLat([-27, 19]));\r\n\r\n    // instance.addLayer(data_filter_sz());\r\n\r\n    transaction(instance);\r\n\r\n  }\r\n  return appMap;\r\n}\r\n\r\nexport {\r\n  sixthMap\r\n}","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\n\r\nimport { sixthMap } from '../../map/Instance/sixthMap';\r\n\r\n\r\nclass TransactionPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const ins = sixthMap(this.myRef.current);\r\n    this.setState({\r\n      ins: ins\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.ins.destroy();\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row className='page'>\r\n          <Col span=\"20\" >\r\n            <div style={{ width: \"100%\", height: \"100%\" }} ref={this.myRef}></div>\r\n          </Col>\r\n          <Col span=\"4\" >\r\n            <div style={{ background: '#ececec', height: \"100%\" }}>\r\n              <h2><pre className=\"citylisttitle\">\r\n                <span style={{ background: \"#1890ff\", color: \"white\", padding: '5px' }}>事务</span>\r\n                <span style={{ background: \"white\", color: \"#1890ff\", padding: '5px' }}>操作</span>\r\n              </pre></h2>\r\n              <p>\r\n\r\n              </p>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default TransactionPage;","import React from 'react';\r\nimport './index.less';\r\n\r\nlet Cesium = window.Cesium\r\nclass CesiumPage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.myRef = React.createRef();\r\n    this.state = {\r\n      ins: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    //var viewer = new Cesium.Viewer('cesiumContainer');\r\n    //Sandcastle_Begin\r\n    const viewer = new Cesium.Viewer(\"cesiumContainer\", {\r\n      shouldAnimate: true,\r\n    });\r\n\r\n    const czmlPath = \"/zwen.github.io/SampleData/\";\r\n    let vehicleEntity;\r\n\r\n    // Add a blank CzmlDataSource to hold our multi-part entity/entities.\r\n    const dataSource = new Cesium.CzmlDataSource();\r\n    viewer.dataSources.add(dataSource);\r\n\r\n    // This demo shows how a single path can be broken up into several CZML streams.\r\n    const partsToLoad = [\r\n      {\r\n        url: \"MultipartVehicle_part1.czml\",\r\n        range: [0, 1500],\r\n        requested: false,\r\n        loaded: false,\r\n      },\r\n      {\r\n        url: \"MultipartVehicle_part2.czml\",\r\n        range: [1500, 3000],\r\n        requested: false,\r\n        loaded: false,\r\n      },\r\n      {\r\n        url: \"MultipartVehicle_part3.czml\",\r\n        range: [3000, 4500],\r\n        requested: false,\r\n        loaded: false,\r\n      },\r\n    ];\r\n\r\n    // Helper function to mark a part as requested, and process it into the dataSource.\r\n    function processPart(part) {\r\n      part.requested = true;\r\n      dataSource.process(czmlPath + part.url).then(function () {\r\n        part.loaded = true;\r\n\r\n        // Follow the vehicle with the camera.\r\n        if (!viewer.trackedEntity) {\r\n          viewer.trackedEntity = vehicleEntity = dataSource.entities.getById(\r\n            \"Vehicle\"\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // Load the first part up front.\r\n    processPart(partsToLoad[0]);\r\n\r\n    // Load a new section before the clock naturally gets there.\r\n    // Note this can't predict when a user may fast-forward to it.\r\n    const preloadTimeInSeconds = 100;\r\n\r\n    viewer.clock.onTick.addEventListener(function (clock) {\r\n      // This example uses time offsets from the start to identify which parts need loading.\r\n      const timeOffset = Cesium.JulianDate.secondsDifference(\r\n        clock.currentTime,\r\n        clock.startTime\r\n      );\r\n\r\n      // Filter the list of parts to just the ones that need loading right now.\r\n      // Then, process each part that needs loading.\r\n      partsToLoad\r\n        .filter(function (part) {\r\n          return (\r\n            !part.requested &&\r\n            timeOffset >= part.range[0] - preloadTimeInSeconds &&\r\n            timeOffset <= part.range[1]\r\n          );\r\n        })\r\n        .forEach(function (part) {\r\n          processPart(part);\r\n        });\r\n\r\n      if (vehicleEntity) {\r\n        const fuel = vehicleEntity.properties.fuel_remaining.getValue(\r\n          clock.currentTime\r\n        );\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div id=\"cesiumContainer\" class=\"fullSize\"></div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nexport default CesiumPage;\r\n","import React from 'react';\r\n\r\nclass LeftDemo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ height: '100vh', backgroundColor: 'rgb(255, 255, 255)' }}>\r\n        LeftDemo\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftDemo;","import React from 'react';\r\n\r\nclass CopyRight extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      style: {\r\n        'position': 'absolute',\r\n        'bottom': 0,\r\n        'left': 0,\r\n        'width': '100%',\r\n        'textAlign': 'center',\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={this.state.style}>\r\n        <div className=\"copyright\">Copyright © 2013-2021</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CopyRight;","import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\nconst themes = {\r\n  light: {\r\n    foreground: \"#000000\",\r\n    background: \"#eeeeee\"\r\n  },\r\n  dark: {\r\n    foreground: \"#ffffff\",\r\n    background: \"#222222\"\r\n  }\r\n};\r\n\r\nconst ThemeContext = React.createContext(themes.light);\r\n\r\nfunction App() {\r\n  return (\r\n    <ThemeContext.Provider value={themes.dark}>\r\n      <Toolbar />\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nfunction Toolbar(props) {\r\n  return (\r\n    <div>\r\n      <ThemedButton />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ThemedButton() {\r\n  const theme = useContext(ThemeContext);\r\n  return (\r\n    <button style={{ background: theme.background, color: theme.foreground }}>\r\n      I am styled by theme context!\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction UserInfo({ initialUser }) {\r\n  const [user, setuser] = useState(initialUser);\r\n  return\r\n}\r\n\r\nfunction init(initialCount) {\r\n  return {count: initialCount};\r\n}\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'increment':\r\n      return {count: state.count + 1};\r\n    case 'decrement':\r\n      return {count: state.count - 1};\r\n    case 'reset':\r\n      return init(action.payload);\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nfunction Counter({initialCount}) {\r\n  const [state, dispatch] = useReducer(reducer, initialCount, init);\r\n  return (\r\n    <>\r\n      Count: {state.count}\r\n      <button\r\n        onClick={() => dispatch({type: 'reset', payload: initialCount})}>\r\n        Reset\r\n      </button>\r\n      <button onClick={() => dispatch({type: 'decrement'})}>-</button>\r\n      <button onClick={() => dispatch({type: 'increment'})}>+</button>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nfunction useFriendStatus(friendID) {\r\n  const [isOnline, setIsOnline] = useState(null);\r\n\r\n  function handleStatusChange(status) {\r\n    setIsOnline(status.isOnline);\r\n  }\r\n\r\n  useEffect(() => {\r\n  });\r\n\r\n  return isOnline;\r\n}\r\n\r\nfunction FriendStatus(props) {\r\n  const isOnline = useFriendStatus(props.friend.id);\r\n\r\n  if (isOnline === null) {\r\n    return 'Loading...';\r\n  }\r\n  return isOnline ? 'Online' : 'Offline';\r\n}\r\n\r\nfunction FriendListItem(props) {\r\n  const isOnline = useFriendStatus(props.friend.id);\r\n\r\n  return (\r\n    <li style={{ color: isOnline ? 'green' : 'black' }}>\r\n      {props.friend.name}\r\n    </li>\r\n  );\r\n}\r\nconst friendList = [\r\n  { id: 1, name: 'Phoebe' },\r\n  { id: 2, name: 'Rachel' },\r\n  { id: 3, name: 'Ross' },\r\n];\r\n\r\nfunction ChatRecipientPicker() {\r\n  const [recipientID, setRecipientID] = useState(1);\r\n  const isRecipientOnline = useFriendStatus(recipientID);\r\n\r\n  return (\r\n    <>\r\n      {/* <Circle color={isRecipientOnline ? 'green' : 'red'} /> */}\r\n      <select\r\n        value={recipientID}\r\n        onChange={e => setRecipientID(Number(e.target.value))}\r\n      >\r\n        {friendList.map(friend => (\r\n          <option key={friend.id} value={friend.id}>\r\n            {friend.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction todosReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'add':\r\n      return [...state, {\r\n        text: action.text,\r\n        completed: false\r\n      }];\r\n    // ... other actions ...\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction Todos() {\r\n  const [text, settext] = useState('');\r\n  const [todos, dispatch] = useReducer(todosReducer, []);\r\n\r\n  function handleAddClick(text) {\r\n    dispatch({ type: 'add', text });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <input type='text' onChange={(e) => { settext(e.target.value) }}></input>\r\n      <button onClick={() => { handleAddClick(text) }}>click</button>\r\n      <ul>\r\n        {todos.map((todo, idx) =>\r\n          <li key={idx}\r\n            value={todo.text} >\r\n            {todo.text}\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nexport {\r\n  Counter, FriendStatus, FriendListItem, ChatRecipientPicker, App\r\n}","import React from 'react';\r\n\r\nimport CopyRight from '../CopyRight';\r\n\r\nimport { Counter, FriendStatus, App } from '../UserInfo';\r\n\r\nclass RightDemo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ height: '100vh', backgroundColor: 'rgb(217, 217, 217)' }}>\r\n        RightDemo\r\n        <Counter initialCount={2} />\r\n        <FriendStatus friend={{ id: 123, name: 'tom' }} />\r\n        <App />\r\n        <CopyRight />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RightDemo;","import React from 'react';\r\nimport './index.less';\r\nimport { Row, Col } from 'antd';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nimport MainLayout from '../Layouts/MainLayout/index';\r\nimport BasicLayout from '../Layouts/BasicLayout';\r\n\r\nimport HomePage from '../pages/Home/index';\r\nimport LayerPage from '../pages/Layer/index';\r\nimport DrawPage from '../pages/Draw/index';\r\nimport CityPage from '../pages/City/index';\r\nimport DrawV2Page from '../pages/Draw_V2/index';\r\nimport GetInfo from '../pages/GetInfo/index';\r\nimport MeasurePage from '../pages/Measure/index';\r\nimport ProjectPage from '../pages/Project/index';\r\nimport TransactionPage from '../pages/Transaction/index';\r\nimport CesiumPage from '../pages/Cesium/index';\r\n\r\nimport LeftDemo from '../componment/LeftDemo';\r\nimport RightDemo from '../componment/RightDemo';\r\n\r\nclass MyRouter extends React.Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div>\r\n          <Switch>\r\n            <Route path=\"/layer\" >\r\n              <Row className='page'>\r\n                <Col span=\"20\" >\r\n                  <MainLayout></MainLayout>\r\n                </Col>\r\n                <Col span=\"4\" >\r\n                  <LayerPage></LayerPage>\r\n                </Col>\r\n              </Row>\r\n            </Route>\r\n            <Route path=\"/draw\" >\r\n              <Row className='page'>\r\n                <Col span=\"20\" >\r\n                  <MainLayout></MainLayout>\r\n                </Col>\r\n                <Col span=\"4\" >\r\n                  <DrawPage></DrawPage>\r\n                </Col>\r\n              </Row>\r\n            </Route>\r\n            <Route path=\"/city\" >\r\n              <CityPage></CityPage>\r\n            </Route>\r\n            <Route path=\"/draw_V2\" >\r\n              <DrawV2Page></DrawV2Page>\r\n            </Route>\r\n            <Route path=\"/getinfo\" >\r\n              <GetInfo></GetInfo>\r\n            </Route>\r\n            <Route path=\"/measure\" >\r\n              <MeasurePage></MeasurePage>\r\n            </Route>\r\n            <Route path=\"/project\" >\r\n              <ProjectPage></ProjectPage>\r\n            </Route>\r\n            <Route path=\"/transaction\" >\r\n              <TransactionPage></TransactionPage>\r\n            </Route>\r\n            <Route path=\"/cesium\" >\r\n              <CesiumPage></CesiumPage>\r\n            </Route>\r\n            <Route path=\"/test\">\r\n              <BasicLayout left={<LeftDemo />}\r\n                right={<RightDemo />} >\r\n              </BasicLayout>\r\n            </Route>\r\n            <Route path=\"/\" >\r\n              <Row className='page'>\r\n                <Col span=\"20\" >\r\n                  <MainLayout></MainLayout>\r\n                </Col>\r\n                <Col span=\"4\" >\r\n                  <HomePage></HomePage>\r\n                </Col>\r\n              </Row>\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MyRouter;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Router';\nimport MyRouter from './Router/index';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <App /> */}\n    <MyRouter />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}